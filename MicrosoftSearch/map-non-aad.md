---
title: Сопоставление удостоверений, не являющихся AAD
ms.author: monaray
author: monaray97
manager: jameslau
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Инструкции по сопоставлению удостоверений, не являющихся AAD
ms.openlocfilehash: cd7d0eb17678d69ec1966e4472b38c1f18c30809
ms.sourcegitcommit: 59cdd3f0f82b7918399bf44d27d9891076090f4f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/20/2020
ms.locfileid: "49367661"
---
# <a name="map-your-non-azure-ad-identities"></a><span data-ttu-id="4b230-103">Сопоставление удостоверений, не являющихся Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b230-103">Map your non-Azure AD Identities</span></span>  

<span data-ttu-id="4b230-104">В этой статье рассказывается о том, как сопоставить удостоверения, не являющиеся Azure AD, с удостоверениями Azure AD, чтобы пользователи в списке управления доступом (ACL) с удостоверениями, не являющимися Azure AD, могли видеть область результатов поиска в соединителе.</span><span class="sxs-lookup"><span data-stu-id="4b230-104">This article walks you through the steps of mapping your non-Azure AD identities to your Azure AD identities so that people in your Access Control List (ACL) with non-Azure AD identities can see connector search results scoped to them.</span></span>

<span data-ttu-id="4b230-105">Эти действия относятся только к администраторам поиска, которые настраивают соединители [ServiceNow](servicenow-connector.md) или [Salesforce](salesforce-connector.md) по корпорации Майкрософт с разрешениями поиска "только пользователи с доступом к этому источнику данных" и типом удостоверения "не AAD".</span><span class="sxs-lookup"><span data-stu-id="4b230-105">These steps are only relevant to search administrators who are setting up a [ServiceNow](servicenow-connector.md) or [Salesforce](salesforce-connector.md) connectors by Microsoft with search permissions for "Only people with access to this data source" and identity type "Non-AAD."</span></span>

>[!NOTE]
><span data-ttu-id="4b230-106">Если вы настраиваете соединитель Salesforce и выбираете **только пользователей с доступом к этому источнику данных** и типу удостоверения **AAD** на экране разрешения поиска, обратитесь к статье Map The Identity [Azure AD](map-aad.md) для получения инструкций по сопоставлению удостоверений Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b230-106">If you are setting up a Salesforce connector and select **Only people with access to this data source** and identity type **AAD** on the search permissions screen, refer to the [Map your Azure AD Identities](map-aad.md) article for steps on how to map Azure AD identities.</span></span>  

## <a name="steps-for-mapping-your-non-azure-ad-properties"></a><span data-ttu-id="4b230-107">Действия по сопоставлению свойств, не относящихся к Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b230-107">Steps for mapping your non-Azure AD properties</span></span>

### <a name="1-select-an-azure-ad-user-property"></a><span data-ttu-id="4b230-108">1. Выберите свойство пользователя Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b230-108">1. Select an Azure AD user property</span></span>  

<span data-ttu-id="4b230-109">Вы можете выбрать свойство пользователя Azure AD, для которого создается сопоставление.</span><span class="sxs-lookup"><span data-stu-id="4b230-109">You can select the Azure AD user property you are creating the mapping for.</span></span> <span data-ttu-id="4b230-110">Это свойство Target, с помощью которого вы аиминг Сопоставление удостоверений, не относящихся к Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b230-110">This is the target property you are aiming to map your non-Azure AD identities to.</span></span>  

<span data-ttu-id="4b230-111">Вы можете выбрать одно из следующих свойств Azure AD:</span><span class="sxs-lookup"><span data-stu-id="4b230-111">You can select one of the following Azure AD properties:</span></span>

| <span data-ttu-id="4b230-112">Свойство Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b230-112">Azure AD property</span></span>    | <span data-ttu-id="4b230-113">Определение</span><span class="sxs-lookup"><span data-stu-id="4b230-113">Definition</span></span>           | <span data-ttu-id="4b230-114">Пример</span><span class="sxs-lookup"><span data-stu-id="4b230-114">Example</span></span>         |
| :------------------- | :------------------- |:--------------- |
| <span data-ttu-id="4b230-115">Имя участника-пользователя (UPN)</span><span class="sxs-lookup"><span data-stu-id="4b230-115">User Principal Name (UPN)</span></span>  | <span data-ttu-id="4b230-116">Имя участника-пользователя состоит из префикса имени участника-пользователя (имя учетной записи пользователя) и суффикса имени участника-пользователя (DNS-имени домена).</span><span class="sxs-lookup"><span data-stu-id="4b230-116">A UPN consists of a UPN prefix (the user account name) and a UPN suffix (a DNS domain name).</span></span> <span data-ttu-id="4b230-117">Префикс присоединяется с суффиксом, используя символ "@".</span><span class="sxs-lookup"><span data-stu-id="4b230-117">The prefix is joined with the suffix using the "@" symbol.</span></span> | <span data-ttu-id="4b230-118">us1@contoso.onmicrosoft.com</span><span class="sxs-lookup"><span data-stu-id="4b230-118">us1@contoso.onmicrosoft.com</span></span> |
| <span data-ttu-id="4b230-119">Идентификатор Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b230-119">Azure AD ID</span></span>                 | <span data-ttu-id="4b230-120">Идентификатор Azure AD для определенного пользователя — это уникальный идентификатор GUID пользователя.</span><span class="sxs-lookup"><span data-stu-id="4b230-120">An Azure AD ID for a given user is the unique GUID of the user.</span></span>                 | <span data-ttu-id="4b230-121">58006c96-9e6e-45ea-8c88-4a56851eefad</span><span class="sxs-lookup"><span data-stu-id="4b230-121">58006c96-9e6e-45ea-8c88-4a56851eefad</span></span>            |
| <span data-ttu-id="4b230-122">Идентификатор безопасности Active Directory (SID)</span><span class="sxs-lookup"><span data-stu-id="4b230-122">Active Directory Security ID (SID)</span></span>                  | <span data-ttu-id="4b230-123">SID (идентификатор безопасности) — это уникальный идентификатор, который используется службой Active Directory для идентификации объектов в качестве участника безопасности.</span><span class="sxs-lookup"><span data-stu-id="4b230-123">SID (Security Identifier) is a unique identifier that Active Directory uses to identify objects as security principal.</span></span>                  | <span data-ttu-id="4b230-124">S – 1-5-21-453406510-812318184-4183662089</span><span class="sxs-lookup"><span data-stu-id="4b230-124">S-1-5-21-453406510-812318184-4183662089</span></span>             |

### <a name="2-select-non-azure-ad-user-properties-to-map"></a><span data-ttu-id="4b230-125">2. Выберите сопоставление пользовательских свойств пользователей, не являющихся Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b230-125">2. Select non-Azure AD user properties to map</span></span>

<span data-ttu-id="4b230-126">Вы можете выбрать свойства, не относящиеся к Azure AD, которые извлекаются из источника данных, чтобы применить регулярные выражения.</span><span class="sxs-lookup"><span data-stu-id="4b230-126">You can select non-Azure AD properties pulled from your data source to apply regular expressions on.</span></span> <span data-ttu-id="4b230-127">Чтобы узнать больше о том, где можно найти эти свойства в источнике данных, просмотрите страницы [ServiceNow](servicenow-connector.md) и [Salesforce](salesforce-connector.md) .</span><span class="sxs-lookup"><span data-stu-id="4b230-127">To learn more about where to find these properties in your data source, see the [ServiceNow](servicenow-connector.md) and [Salesforce](salesforce-connector.md) pages.</span></span>  

<span data-ttu-id="4b230-128">Вы можете выбрать из раскрывающегося списка свойство пользователя, не являющегося Azure AD, и предоставить регулярное выражение, которое будет применяться к значениям пользовательских свойств.</span><span class="sxs-lookup"><span data-stu-id="4b230-128">You can select a non-Azure AD user property from the dropdown and provide a regular expression to be applied on those user property values.</span></span> <span data-ttu-id="4b230-129">Чтобы узнать больше о регулярных выражениях, ознакомьтесь со статьей [Справочник по регулярным выражениям]( https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="4b230-129">To learn more about regular expressions, see [regular expression reference]( https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>  

<span data-ttu-id="4b230-130">Ниже приведено несколько примеров регулярных выражений и их выходных данных, примененных к образцу строки:</span><span class="sxs-lookup"><span data-stu-id="4b230-130">Below are some examples of regular expressions and their outputs applied to a sample string:</span></span> 

| <span data-ttu-id="4b230-131">Пример строки</span><span class="sxs-lookup"><span data-stu-id="4b230-131">Sample String</span></span>                  | <span data-ttu-id="4b230-132">Регулярное выражение</span><span class="sxs-lookup"><span data-stu-id="4b230-132">Regular expression</span></span>                 | <span data-ttu-id="4b230-133">Вывод регулярного выражения для примера строки</span><span class="sxs-lookup"><span data-stu-id="4b230-133">Output of regular expression on sample string</span></span>           |
| :------------------- | :------------------- |:---------------|
| <span data-ttu-id="4b230-134">Алексис Васкуез</span><span class="sxs-lookup"><span data-stu-id="4b230-134">Alexis Vasquez</span></span>  | <span data-ttu-id="4b230-135">.\*</span><span class="sxs-lookup"><span data-stu-id="4b230-135">.\*</span></span> | <span data-ttu-id="4b230-136">Алексис Васкуез</span><span class="sxs-lookup"><span data-stu-id="4b230-136">Alexis Vasquez</span></span> |
| <span data-ttu-id="4b230-137">Алексис Васкуез</span><span class="sxs-lookup"><span data-stu-id="4b230-137">Alexis Vasquez</span></span>                 | <span data-ttu-id="4b230-138">..$</span><span class="sxs-lookup"><span data-stu-id="4b230-138">..$</span></span>                 | <span data-ttu-id="4b230-139">Drive</span><span class="sxs-lookup"><span data-stu-id="4b230-139">ez</span></span>            |
| <span data-ttu-id="4b230-140">Алексис Васкуез</span><span class="sxs-lookup"><span data-stu-id="4b230-140">Alexis Vasquez</span></span>                  | <span data-ttu-id="4b230-141">(\w +) $</span><span class="sxs-lookup"><span data-stu-id="4b230-141">(\w+)$</span></span>                  | <span data-ttu-id="4b230-142">васкуез</span><span class="sxs-lookup"><span data-stu-id="4b230-142">Vasquez</span></span>             |

<span data-ttu-id="4b230-143">Вы можете добавить любое количество пользовательских свойств, не являющихся Azure AD, так же, как и в случае выражений.</span><span class="sxs-lookup"><span data-stu-id="4b230-143">You can add as many non-Azure AD user properties as you would like expressions for.</span></span> <span data-ttu-id="4b230-144">Вы можете применить разные регулярные выражения к одному и тому же свойству пользователя, если итоговая формула имеет гарантию.</span><span class="sxs-lookup"><span data-stu-id="4b230-144">You can apply different regular expressions to the same user property if your final formula warrants that.</span></span>  

### <a name="3-create-formula-to-complete-mapping"></a><span data-ttu-id="4b230-145">3. Создание формулы для завершения сопоставления</span><span class="sxs-lookup"><span data-stu-id="4b230-145">3. Create formula to complete mapping</span></span>

<span data-ttu-id="4b230-146">Вы можете объединить выходные данные регулярных выражений, примененных к каждому из пользовательских свойств, не являющихся Azure AD, в соответствии со свойством Azure AD, выбранным на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="4b230-146">You can combine the outputs of the regular expressions applied to each of your non-Azure AD user properties to form the Azure AD property selected in step 1.</span></span>

<span data-ttu-id="4b230-147">В поле Формула " {0} " соответствует выходному результату регулярного выражения, примененному к *первому* выбранному свойству, не являющемуся Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b230-147">In the formula box, "{0}" corresponds to the output of the regular expression applied to the *first* non-Azure AD property you selected.</span></span> <span data-ttu-id="4b230-148">" {1} " соответствует выходному результату регулярного выражения, примененному ко *второму* выбранному свойству, не являющемуся Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b230-148">"{1}" corresponds to the output of the regular expression applied to the *second* non-Azure AD property you selected.</span></span> <span data-ttu-id="4b230-149">" {2} " соответствует выходному результату регулярного выражения, примененному к *третьему* свойству, отличному от Azure AD, и т. д.</span><span class="sxs-lookup"><span data-stu-id="4b230-149">"{2}" corresponds to the output of the regular expression applied to the *third* non-Azure AD property, and so on.</span></span>  

<span data-ttu-id="4b230-150">Ниже приведено несколько примеров формул с примерами выходов регулярных выражений и выводом формул:</span><span class="sxs-lookup"><span data-stu-id="4b230-150">Below are some examples of formulas with sample regular expression outputs and formula outputs:</span></span> 

| <span data-ttu-id="4b230-151">Пример формулы</span><span class="sxs-lookup"><span data-stu-id="4b230-151">Sample formula</span></span>                  | <span data-ttu-id="4b230-152">Значение {0} для образца пользователя</span><span class="sxs-lookup"><span data-stu-id="4b230-152">Value of {0} on sample user</span></span>                 | <span data-ttu-id="4b230-153">Значение {1} для образца пользователя</span><span class="sxs-lookup"><span data-stu-id="4b230-153">Value of {1} on sample user</span></span>           | <span data-ttu-id="4b230-154">Выходные данные формулы</span><span class="sxs-lookup"><span data-stu-id="4b230-154">Output of formula</span></span>                  |
| :------------------- | :------------------- |:---------------|:---------------|
| <span data-ttu-id="4b230-155">{0}.{1} @contoso. com</span><span class="sxs-lookup"><span data-stu-id="4b230-155">{0}.{1}@contoso.com</span></span>  | <span data-ttu-id="4b230-156">имя</span><span class="sxs-lookup"><span data-stu-id="4b230-156">firstname</span></span> | <span data-ttu-id="4b230-157">Фамили</span><span class="sxs-lookup"><span data-stu-id="4b230-157">lastname</span></span> |<span data-ttu-id="4b230-158">firstname.lastname@contoso.com</span><span class="sxs-lookup"><span data-stu-id="4b230-158">firstname.lastname@contoso.com</span></span>
| <span data-ttu-id="4b230-159">{0}@domain. com</span><span class="sxs-lookup"><span data-stu-id="4b230-159">{0}@domain.com</span></span>                 | <span data-ttu-id="4b230-160">UserID</span><span class="sxs-lookup"><span data-stu-id="4b230-160">userid</span></span>                 |             |<span data-ttu-id="4b230-161">userid@domain.com</span><span class="sxs-lookup"><span data-stu-id="4b230-161">userid@domain.com</span></span>

<span data-ttu-id="4b230-162">После того как вы задаете формулу, вы можете нажать кнопку **Предварительный просмотр** , чтобы просмотреть 5 случайных пользователей из источника данных с применением соответствующих сопоставлений пользователей.</span><span class="sxs-lookup"><span data-stu-id="4b230-162">After you provide your formula, you can optionally click **Preview** to see a preview of 5 random users from your data source with their respective user mappings applied.</span></span> <span data-ttu-id="4b230-163">В выходных данных предварительного просмотра содержатся значения свойств пользователя, не относящегося к Azure AD, выбранные в шаге 2 для этих пользователей, и выходные данные итоговой формулы, предоставленной на шаге 3 для этого пользователя.</span><span class="sxs-lookup"><span data-stu-id="4b230-163">The output of the preview includes the value of the non-Azure AD user properties selected in step 2 for those users and the output of the final formula provided in step 3 for that user.</span></span> <span data-ttu-id="4b230-164">Кроме того, он указывает, можно ли разрешить выход формулы пользователю Azure AD в клиенте с помощью значка "Success" или "Failed".</span><span class="sxs-lookup"><span data-stu-id="4b230-164">It also indicates whether the output of the formula could be resolved to an Azure AD user in your tenant via a "Success" or "Failed" icon.</span></span>  

>[!NOTE]
><span data-ttu-id="4b230-165">Вы по-прежнему можете продолжить создание подключения, если при нажатии кнопки **Предварительный просмотр** одно или несколько сопоставлений пользователей имеют состояние "ошибка".</span><span class="sxs-lookup"><span data-stu-id="4b230-165">You can still proceed with creating your connection if one or more user mappings have a "Failed" status after you click **Preview**.</span></span> <span data-ttu-id="4b230-166">В предварительной версии отображаются 5 случайных пользователей и их сопоставления из источника данных.</span><span class="sxs-lookup"><span data-stu-id="4b230-166">The preview shows 5 random users and their mappings from your data source.</span></span> <span data-ttu-id="4b230-167">Если вы сопоставлению не удается сопоставить всех пользователей, может возникнуть такая ситуация.</span><span class="sxs-lookup"><span data-stu-id="4b230-167">If the mapping you provide does not map all users, you may experience this case.</span></span>

## <a name="sample-non-azure-ad-mapping"></a><span data-ttu-id="4b230-168">Пример сопоставления, не относящегося к Azure AD</span><span class="sxs-lookup"><span data-stu-id="4b230-168">Sample non-Azure AD mapping</span></span>

<span data-ttu-id="4b230-169">В приведенном ниже снимке показан пример сопоставления, не относящегося к Azure AD.</span><span class="sxs-lookup"><span data-stu-id="4b230-169">See the snapshot below for a sample non-Azure AD mapping.</span></span>

![Пример моментального снимка, в котором описывается заполнение страницы сопоставления AD без Azure](media/non-aad-mapping.png)

## <a name="limitations"></a><span data-ttu-id="4b230-171">Ограничения</span><span class="sxs-lookup"><span data-stu-id="4b230-171">Limitations</span></span>  

- <span data-ttu-id="4b230-172">Для всех пользователей поддерживается только одно сопоставление.</span><span class="sxs-lookup"><span data-stu-id="4b230-172">Only one mapping is supported for all users.</span></span> <span data-ttu-id="4b230-173">Условные сопоставления не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="4b230-173">Conditional mappings are not supported.</span></span>  

- <span data-ttu-id="4b230-174">Вы не можете изменить сопоставление после публикации подключения.</span><span class="sxs-lookup"><span data-stu-id="4b230-174">You cannot change your mapping once the connection is published.</span></span>  

- <span data-ttu-id="4b230-175">В настоящее время преобразование поддерживаются только выражения на основе Regex для свойств пользователей, не являющихся AAD.</span><span class="sxs-lookup"><span data-stu-id="4b230-175">Only regex-based expressions against the non-AAD user properties are currently supported for the transformation.</span></span>

- <span data-ttu-id="4b230-176">Существует только 3 удостоверения Azure AD, которые можно сопоставить с (имя участника-пользователя, идентификатор Azure AD и ИД безопасности AD).</span><span class="sxs-lookup"><span data-stu-id="4b230-176">There are only 3 Azure AD identities you can choose to map to (UPN, Azure AD ID, and AD SID).</span></span>
---
title: Сопоставление удостоверений, не являющихся AAD
ms.author: monaray
author: monaray97
manager: jameslau
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
ROBOTS: NOINDEX, NOFOLLOW
description: инструкции по сопоставлению удостоверений, не являющихся AAD
ms.openlocfilehash: be479cfd9dad585e83b5a39ff3ce4a84b9d41676
ms.sourcegitcommit: 77ec27736f3c8434b2ac47e10897ac2606ee8a03
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/11/2020
ms.locfileid: "48992897"
---
# <a name="map-your-non-azure-ad-identities"></a>Сопоставление удостоверений, не являющихся Azure AD  

В этой статье рассказывается о том, как сопоставить удостоверения, не являющиеся Azure AD, с удостоверениями Azure AD, чтобы пользователи в списке управления доступом (ACL) с удостоверениями, не являющимися Azure AD, могли видеть область результатов поиска в соединителе.

Эти действия относятся только к администраторам поиска, которые настраивают соединители [ServiceNow](servicenow-connector.md) или [Salesforce](salesforce-connector.md) по корпорации Майкрософт с разрешениями поиска "только пользователи с доступом к этому источнику данных" и типом удостоверения "не AAD".

>[!NOTE]
>Если вы настраиваете соединитель Salesforce и выбираете **только пользователей с доступом к этому источнику данных** и типу удостоверения **AAD** на экране разрешения поиска, обратитесь к статье Map The Identity [Azure AD](map-aad.md) для получения инструкций по сопоставлению удостоверений Azure AD.  

## <a name="steps-for-mapping-your-non-azure-ad-properties"></a>Действия по сопоставлению свойств, не относящихся к Azure AD

### <a name="1-select-an-azure-ad-user-property"></a>1. Выберите свойство пользователя Azure AD.  

Вы можете выбрать свойство пользователя Azure AD, для которого создается сопоставление. Это свойство Target, с помощью которого вы аиминг Сопоставление удостоверений, не относящихся к Azure AD.  

Вы можете выбрать одно из следующих свойств Azure AD:

| Свойство Azure AD    | Определение           | Пример         |
| :------------------- | :------------------- |:--------------- |
| Имя участника-пользователя (UPN)  | Имя участника-пользователя состоит из префикса имени участника-пользователя (имя учетной записи пользователя) и суффикса имени участника-пользователя (DNS-имени домена). Префикс присоединяется с суффиксом, используя символ "@". | us1@contoso.onmicrosoft.com |
| Идентификатор Azure AD                 | Идентификатор Azure AD для определенного пользователя — это уникальный идентификатор GUID пользователя.                 | 58006c96-9e6e-45ea-8c88-4a56851eefad            |
| Идентификатор безопасности Active Directory (SID)                  | SID (идентификатор безопасности) — это уникальный идентификатор, который используется службой Active Directory для идентификации объектов в качестве участника безопасности.                  | S – 1-5-21-453406510-812318184-4183662089             |

### <a name="2-select-non-azure-ad-user-properties-to-map"></a>2. Выберите сопоставление пользовательских свойств пользователей, не являющихся Azure AD

Вы можете выбрать свойства, не относящиеся к Azure AD, которые извлекаются из источника данных, чтобы применить регулярные выражения. Чтобы узнать больше о том, где можно найти эти свойства в источнике данных, просмотрите страницы [ServiceNow](servicenow-connector.md) и [Salesforce](salesforce-connector.md) .  

Вы можете выбрать из раскрывающегося списка свойство пользователя, не являющегося Azure AD, и предоставить регулярное выражение, которое будет применяться к значениям пользовательских свойств. Чтобы узнать больше о регулярных выражениях, ознакомьтесь со статьей [Справочник по регулярным выражениям]( https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference).  

Ниже приведено несколько примеров регулярных выражений и их выходных данных, примененных к образцу строки: 

| Пример строки                  | Регулярное выражение                 | Вывод регулярного выражения для примера строки           |
| :------------------- | :------------------- |:---------------|
| Алексис Васкуез  | .* | Алексис Васкуез |
| Алексис Васкуез                 | ..$                 | Drive            |
| Алексис Васкуез                  | (\w +) $                  | васкуез             |

Вы можете добавить любое количество пользовательских свойств, не являющихся Azure AD, так же, как и в случае выражений. Вы можете применить разные регулярные выражения к одному и тому же свойству пользователя, если итоговая формула имеет гарантию.  

### <a name="3-create-formula-to-complete-mapping"></a>3. Создание формулы для завершения сопоставления

Вы можете объединить выходные данные регулярных выражений, примененных к каждому из пользовательских свойств, не являющихся Azure AD, в соответствии со свойством Azure AD, выбранным на шаге 1.

В поле Формула " {0} " соответствует выходному результату регулярного выражения, примененному к *первому* выбранному свойству, не являющемуся Azure AD. " {1} " соответствует выходному результату регулярного выражения, примененному ко *второму* выбранному свойству, не являющемуся Azure AD. " {2} " соответствует выходному результату регулярного выражения, примененному к *третьему* свойству, отличному от Azure AD, и т. д.  

Ниже приведено несколько примеров формул с примерами выходов регулярных выражений и выводом формул: 

| Пример формулы                  | Значение {0} для образца пользователя                 | Значение {1} для образца пользователя           | Выходные данные формулы                  |
| :------------------- | :------------------- |:---------------|:---------------|
| {0}.{1} @contoso. com  | имя | Фамили |firstname.lastname@contoso.com
| {0}@domain. com                 | UserID                 |             |userid@domain.com

После того как вы задаете формулу, вы можете нажать кнопку **Предварительный просмотр** , чтобы просмотреть 5 случайных пользователей из источника данных с применением соответствующих сопоставлений пользователей. В выходных данных предварительного просмотра содержатся значения свойств пользователя, не относящегося к Azure AD, выбранные в шаге 2 для этих пользователей, и выходные данные итоговой формулы, предоставленной на шаге 3 для этого пользователя. Кроме того, он указывает, можно ли разрешить выход формулы пользователю Azure AD в клиенте с помощью значка "Success" или "Failed".  

>[!NOTE]
>Вы по-прежнему можете продолжить создание подключения, если при нажатии кнопки **Предварительный просмотр** одно или несколько сопоставлений пользователей имеют состояние "ошибка". В предварительной версии отображаются 5 случайных пользователей и их сопоставления из источника данных. Если вы сопоставлению не удается сопоставить всех пользователей, может возникнуть такая ситуация.

## <a name="sample-non-azure-ad-mapping"></a>Пример сопоставления, не относящегося к Azure AD

В приведенном ниже снимке показан пример сопоставления, не относящегося к Azure AD.

![Пример моментального снимка, в котором описывается заполнение страницы сопоставления AD без Azure](media/non-aad-mapping.png)

## <a name="limitations"></a>Ограничения  

- Для всех пользователей поддерживается только одно сопоставление. Условные сопоставления не поддерживаются.  

- Вы не можете изменить сопоставление после публикации подключения.  

- В настоящее время преобразование поддерживаются только выражения на основе Regex для свойств пользователей, не являющихся AAD.

- Существует только 3 удостоверения Azure AD, которые можно сопоставить с (имя участника-пользователя, идентификатор Azure AD и ИД безопасности AD).
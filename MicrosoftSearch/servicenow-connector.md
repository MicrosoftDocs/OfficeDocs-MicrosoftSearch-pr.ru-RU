---
title: Соединитель ServiceNow для службы поиска Майкрософт
ms.author: kam1
author: TheKarthikeyan
manager: harshkum
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Настройка соединителя ServiceNow для поиска Майкрософт
ms.openlocfilehash: b60583e61687b13c7fd631cd1c4a9f6d663724e8
ms.sourcegitcommit: 59435698bece013ae64ca2a68c43455ca10e3fdf
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/05/2020
ms.locfileid: "48927201"
---
# <a name="servicenow-connector"></a>Соединитель ServiceNow

С помощью соединителя ServiceNow ваша организация может индексировать статьи базы знаний, которые видимы всем пользователям в Организации. После настройки соединителя и индексирования содержимого из ServiceNow пользователи могут выполнять поиск этих статей из любого клиента Microsoft Search.  

Эта статья предназначена для администраторов Microsoft 365 или пользователей, которые настраивают, запускают и отслеживают соединитель ServiceNow. В этой статье объясняется, как настроить возможности соединителя и соединителя, ограничения и способы устранения неполадок.

Узнайте, как получить доступ к встроенным соединителям Майкрософт из [настройки соединителя, созданного корпорацией Майкрософт для поиска Майкрософт](https://docs.microsoft.com/microsoftsearch/configure-connector). Конфигурация с определенным соединителем ServiceNow описывается в приведенной ниже статье.

## <a name="connection-settings"></a>Параметры подключения
Чтобы подключиться к данным ServiceNow, вам потребуется **URL-адрес экземпляра servicenow** вашей организации, учетные данные для этой учетной записи, а также идентификатор клиента и секрет клиента для проверки подлинности OAuth.  

**URL-адрес экземпляра ServiceNow** вашей организации обычно выглядит так же, как **https:// &lt; ваша организация-домен>. Service-Now.com**. Вместе с этим URL-адресом вам потребуется учетная запись для настройки подключения к ServiceNow, а также разрешение Microsoft Search для периодического обновления статей из ServiceNow на основе расписания обновления. Учетная запись должна иметь роль <em>базы знаний</em> . [Узнайте, как назначить роль для учетных записей ServiceNow](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).

Для проверки подлинности и синхронизации контента из ServiceNow выберите **один из трех** поддерживаемых способов:
1. Обычная проверка подлинности 
2. ServiceNow OAuth (рекомендуется)
3. Azure AD OpenID Connect

#### <a name="basic-authentication"></a>Обычная проверка подлинности
Введите имя пользователя и пароль учетной записи ServiceNow с ролью <em>базы знаний</em> для проверки подлинности в экземпляре.
#### <a name="servicenow-oauth"></a>OAuth OAuth

Чтобы использовать для проверки подлинности протоколы ServiceNow OAuth, администратору ServiceNow необходимо подготовить конечную точку в экземпляре ServiceNow, чтобы приложение Microsoft Search могло получить доступ к экземпляру. Чтобы узнать больше, ознакомьтесь со статьей [Создание конечной точки для доступа клиентов к экземпляру](https://docs.servicenow.com/bundle/newyork-platform-administration/page/administer/security/task/t_CreateEndpointforExternalClients.html) в документации ServiceNow.

В следующей таблице приведены указания по заполнению формы создания конечной точки:

**Field** | **Описание** | **Рекомендуемое значение**
--- | --- | ---
Имя | Это уникальное значение определяет приложение, для которого требуется доступ OAuth. | Поиск (Майкрософт)
Идентификатор клиента | Автоматически созданный уникальный идентификатор приложения, предназначенный только для чтения. Экземпляр использует идентификатор клиента при запросе маркера доступа. | Н/Д
Секрет клиента | С помощью этой общедоступной строки секрета экземпляр ServiceNow и служба поиска Microsoft авторизацию связи друг с другом. | Следуйте рекомендациям по обеспечению безопасности, рассматривая их как пароль.
URL-адрес перенаправления | Обязательный URL-адрес обратного вызова, на который перенаправляется сервер проверки подлинности. | https://gcs.office.com/v1.0/admin/oauth/callback
URL-адрес эмблемы | URL-адрес, содержащий изображение логотипа приложения. | Н/Д
Активное | Установите флажок, чтобы активировать реестр приложения. | Значение Active
Срок действия маркера обновления | Время (в секундах), в течение которого действует маркер обновления. По умолчанию срок действия маркеров обновления истечет через 100 дней (8640000 секунд). | 31 536 000 (1 год)
Срок действия маркеров доступа | Количество секунд, в течение которого действует маркер доступа. | 43 200 (12 часов)

Введите идентификатор клиента и секрет клиента, чтобы подключиться к экземпляру. После подключения используйте учетные данные учетной записи ServiceNow для проверки подлинности для обхода. Учетная запись должна иметь роль <em>базы знаний</em> . 

#### <a name="azure-ad-openid-connect"></a>Azure AD OpenID Connect

Чтобы использовать Azure AD OpenID Connect для проверки подлинности, выполните указанные ниже действия.

###### <a name="step-1-register-a-new-application-in-azure-active-directory"></a>Шаг 1: регистрация нового приложения в Azure Active Directory

Сведения о регистрации нового приложения в Azure Active Directory см в разделе [Регистрация приложения](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#register-an-application). Выберите один организационный каталог клиента. URI перенаправления не требуется. После регистрации Обратите внимание на идентификатор приложения (клиента) и идентификатор каталога (клиента).

###### <a name="step-2-create-a-client-secret"></a>Шаг 2: создание секрета клиента

Чтобы узнать о создании секрета клиента, ознакомьтесь [со статьей Создание секрета клиента](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#add-a-client-secret). Запишите секрет клиента.

###### <a name="step-3-retrieve-service-principal-object-identifier"></a>Шаг 3: получение идентификатора объекта участника службы

Выполните действия, чтобы получить идентификатор объекта участника службы.

1. Запуск PowerShell
2. Установите Azure PowerShell с помощью следующей команды:
```<language>
   Install-Module -Name Az -AllowClobber -Scope CurrentUser
```
3. Подключение к Azure
```<language>
    Connect-AzAccount
```
4. Получение идентификатора объекта участника службы
```<language>
   Get-AzADServicePrincipal -ApplicationId "Application-ID"
```
Замените "Application-ID" ИДЕНТИФИКАТОРом приложения (без кавычек) приложения, зарегистрированного на шаге 1. Обратите внимание на значение Object ID из выходных данных PowerShell. Это идентификатор субъекта-службы.

Теперь у вас есть все сведения, необходимые для портала Azure. В приведенной ниже таблице указаны краткие сведения об этих сведениях.

**Свойство** | **Описание**
--- | ---
Идентификатор каталога (идентификатор клиента) | Это уникальный идентификатор, который ссылается на клиента Azure Active Directory (из шага 1).
Идентификатор приложения (идентификатор клиента) | Это уникальный идентификатор, который ссылается на приложение, зарегистрированное на шаге 1.
Секрет клиента | Это секретный ключ приложения (из шага 2). Рассматривать его как пароль.
ИДЕНТИФИКАТОР субъекта службы | Удостоверение приложения, работающего в качестве службы. (из шага 3)

###### <a name="step-4-register-servicenow-application"></a>Шаг 4: регистрация приложения ServiceNow

В экземпляре ServiceNow необходимо выполнить следующие настройки.

1. Зарегистрируйте новый объект OAuth ОИДК. Чтобы узнать больше, ознакомьтесь со статьей [Создание поставщика OAuth оидк](https://docs.servicenow.com/bundle/orlando-platform-administration/page/administer/security/task/add-OIDC-entity.html).
2. В следующей таблице приведены рекомендации по заполнению регистрационной формы поставщика ОИДК

**Field** | **Описание** | **Рекомендуемое значение**
--- | --- | ---
Имя | Уникальное имя, идентифицирующее объект OAuth ОИДК. | Azure AD
Идентификатор клиента | Идентификатор клиента приложения, зарегистрированного на сервере OAuth ОИДК (OAuth). Экземпляр использует идентификатор клиента при запросе маркера доступа. | Идентификатор Application (Client) из шага 1
Секрет клиента | Секрет клиента приложения, зарегистрированного на сервере OAuth ОИДК (OAuth). | Секрет клиента из шага 2

Все остальные значения могут быть заданы по умолчанию.

3. В форме регистрации поставщика ОИДК необходимо добавить новую конфигурацию поставщика ОИДК. Щелкните значок поиска в поле *Конфигурация поставщика Оидк OAuth* , чтобы открыть записи конфигураций оидк. Нажмите кнопку Создать.
4. В следующей таблице приведены рекомендации по заполнению формы конфигурации поставщика ОИДК

**Field** | **Рекомендуемое значение**
--- | ---
Поставщик ОИДК |  Azure AD
URL-адрес метаданных ОИДК | Это должно быть в формате HTTPS \: //логин.микрософтонлине.ком/"тенандид"/.Велл-кновн/опенид-конфигуратион <br/>Замените "tenantID" на идентификатор каталога (клиента) из шага 1 (без кавычек).
Жизненный цикл кэша конфигурации ОИДК |  120
Для приложений | Глобальные
Утверждение пользователя | sub
Поле пользователя | Идентификатор пользователя
Включение проверки утверждения ЖТИ | Отключено

5. Нажмите кнопку послать и обновите форму объекта OAuth ОИДК.

###### <a name="step-5-create-a-servicenow-account"></a>Шаг 5: создание учетной записи ServiceNow

Ознакомьтесь с инструкциями по созданию учетной записи ServiceNow и [Создайте пользователя в servicenow](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_CreateAUser.html).

В следующей таблице приведены рекомендации по заполнению регистрации учетной записи пользователя ServiceNow

**Field** | **Рекомендуемое значение**
--- | ---
Идентификатор пользователя | ИДЕНТИФИКАТОР субъекта службы из шага 3
Только доступ к веб-службе | Checked

Все остальные значения могут быть оставлены по умолчанию.

###### <a name="step-6-enable-knowledge-role-for-the-servicenow-account"></a>Шаг 6: включение ролика базы знаний для учетной записи ServiceNow

Получите доступ к учетной записи ServiceNow, созданной с помощью идентификатора субъекта ServiceNow, в качестве идентификатора пользователя и назначьте роль базы знаний. Инструкции по назначению роли учетной записи ServiceNow можно найти здесь, [назначив пользователю роль](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).

Используйте идентификатор приложения в качестве идентификатора клиента (из шага 1) и секрет клиента (из шага 2) в мастере настройки центра администрирования для проверки подлинности в экземпляре ServiceNow с помощью Azure AD OpenID Connect.

## <a name="filter-data"></a>Фильтрация данных 
С помощью строки запроса ServiceNow вы можете указать условия синхронизации статей. Оно аналогично предложению **WHERE** в операторе **SQL SELECT** . Например, можно индексировать только опубликованные и активные статьи. Чтобы узнать о создании собственной строки запроса, ознакомьтесь со [статьей Создание закодированной строки запроса с помощью фильтра](https://docs.servicenow.com/bundle/paris-platform-user-interface/page/use/using-lists/task/t_GenEncodQueryStringFilter.html).

## <a name="manage-search-permissions"></a>Управление разрешениями поиска
Соединитель ServiceNow поддерживает только разрешения поиска, видимые **всем пользователям**. Индексированные данные отображаются в результатах поиска и видимы всем пользователям в Организации.

## <a name="manage-the-search-schema"></a>Управление схемой поиска
После успешного подключения настройте сопоставление схемы поиска. Вы можете выбрать свойства, которые будут доступны для **запроса** , **поиска** и **извлечения**. Чтобы узнать больше об управлении схемой поиска, ознакомьтесь [со статьей управление схемой поиска](https://docs.microsoft.com/microsoftsearch/configure-connector#manage-the-search-schema).

## <a name="set-the-refresh-schedule"></a>Настройка расписания обновления
Соединитель ServiceNow поддерживает расписания обновления для полных и добавочных обходов контента. Рекомендуется задать оба параметра.

Расписание полного обхода контента находит удаленные статьи, которые ранее были синхронизированы с индексом поиска Microsoft Search, и все статьи, которые были перемещены из фильтра синхронизации. При первом подключении к ServiceNow для синхронизации всех статей базы знаний выполняется полный обход контента. Для синхронизации новых элементов и внесения обновлений необходимо запланировать добавочные обходы контента.

Рекомендуемое значение по умолчанию — один день для полного обхода и четыре часа для добавочного обхода.

## <a name="review-and-publish"></a>Просмотр и публикация
После настройки соединителя можно просмотреть и опубликовать подключение.

## <a name="next-steps"></a>Дальнейшие действия
После публикации подключения необходимо настроить страницу результатов поиска. Чтобы узнать больше о настройке результатов поиска, ознакомьтесь [со статьей Настройка страницы результатов поиска](https://docs.microsoft.com/microsoftsearch/configure-connector#next-steps-customize-the-search-results-page).
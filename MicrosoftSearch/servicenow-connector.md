---
title: Соединитель ServiceNow для службы поиска Майкрософт
ms.author: kam1
author: TheKarthikeyan
manager: harshkum
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Настройка соединителя ServiceNow для поиска Майкрософт
ms.openlocfilehash: 520232f8055d5432ccb96a840a9466ae6a4e3b1a
ms.sourcegitcommit: ac4e261c01262be747341f810d2d1faf220d3961
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/23/2020
ms.locfileid: "49382563"
---
# <a name="servicenow-connector"></a><span data-ttu-id="14fcb-103">Соединитель ServiceNow</span><span class="sxs-lookup"><span data-stu-id="14fcb-103">ServiceNow connector</span></span>

<span data-ttu-id="14fcb-104">С помощью соединителя ServiceNow ваша организация может индексировать статьи базы знаний, которые видимы всем пользователям или ограничены разрешениями на основе условий пользователей в Организации.</span><span class="sxs-lookup"><span data-stu-id="14fcb-104">With the ServiceNow connector, your organization can index knowledge-base articles that are visible to all users or restricted with user criteria permissions within your organization.</span></span> <span data-ttu-id="14fcb-105">После настройки соединителя и индексирования содержимого из ServiceNow пользователи могут выполнять поиск этих статей из любого клиента Microsoft Search.</span><span class="sxs-lookup"><span data-stu-id="14fcb-105">After you configure the connector and index content from ServiceNow, end users can search for those articles from any Microsoft Search client.</span></span>  

<span data-ttu-id="14fcb-106">Эта статья предназначена для администраторов Microsoft 365 или пользователей, которые настраивают, запускают и отслеживают соединитель ServiceNow.</span><span class="sxs-lookup"><span data-stu-id="14fcb-106">This article is for Microsoft 365 administrators or anyone who configures, runs, and monitors a ServiceNow connector.</span></span> <span data-ttu-id="14fcb-107">В этой статье объясняется, как настроить возможности соединителя и соединителя, ограничения и способы устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="14fcb-107">It explains how to configure your connector and connector capabilities, limitations, and troubleshooting techniques.</span></span>

<span data-ttu-id="14fcb-108">Узнайте, как получить доступ к встроенным соединителям Майкрософт из [настройки соединителя, созданного корпорацией Майкрософт для поиска Майкрософт](https://docs.microsoft.com/microsoftsearch/configure-connector).</span><span class="sxs-lookup"><span data-stu-id="14fcb-108">Learn how to access Microsoft built connectors from [Set up your Microsoft-built connector for Microsoft Search](https://docs.microsoft.com/microsoftsearch/configure-connector).</span></span> <span data-ttu-id="14fcb-109">Конфигурация с определенным соединителем ServiceNow описывается в приведенной ниже статье.</span><span class="sxs-lookup"><span data-stu-id="14fcb-109">ServiceNow connector specific configuration is explained in the article below.</span></span>

## <a name="connection-settings"></a><span data-ttu-id="14fcb-110">Параметры подключения</span><span class="sxs-lookup"><span data-stu-id="14fcb-110">Connection Settings</span></span>
<span data-ttu-id="14fcb-111">Чтобы подключиться к данным ServiceNow, вам потребуется **URL-адрес экземпляра servicenow** вашей организации, учетные данные для этой учетной записи, а также идентификатор клиента и секрет клиента для проверки подлинности OAuth.</span><span class="sxs-lookup"><span data-stu-id="14fcb-111">To connect to your ServiceNow data, you need your organization's **ServiceNow instance URL**, credentials for this account, and the Client ID and Client Secret for OAuth authentication.</span></span>  

<span data-ttu-id="14fcb-112">**URL-адрес экземпляра ServiceNow** вашей организации обычно выглядит так же, как **https:// &lt; ваша организация-домен>. Service-Now.com**.</span><span class="sxs-lookup"><span data-stu-id="14fcb-112">Your organization’s **ServiceNow instance URL** typically looks like **https://&lt;your-organization-domain>.service-now.com**.</span></span> <span data-ttu-id="14fcb-113">Вместе с этим URL-адресом вам потребуется учетная запись для настройки подключения к ServiceNow, а также разрешение Microsoft Search для периодического обновления статей из ServiceNow на основе расписания обновления.</span><span class="sxs-lookup"><span data-stu-id="14fcb-113">Along with this URL, you will need an account for setting up the connection to ServiceNow as well as for allowing Microsoft Search to periodically update the articles from ServiceNow based on the refresh schedule.</span></span> <span data-ttu-id="14fcb-114">Учетная запись должна иметь по крайней мере роль <em>базы знаний</em> .</span><span class="sxs-lookup"><span data-stu-id="14fcb-114">The account should at least have <em>knowledge</em> role.</span></span> <span data-ttu-id="14fcb-115">[Узнайте, как назначить роль для учетных записей ServiceNow](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).</span><span class="sxs-lookup"><span data-stu-id="14fcb-115">[Learn how to assign role for ServiceNow accounts](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).</span></span>

>[!NOTE]
><span data-ttu-id="14fcb-116">Если вы хотите выполнить обход удостоверений пользователей и групп для использования разрешений на доступ к статьям базы знаний в результатах поиска Майкрософт, у этой учетной записи должен быть доступ на чтение следующих записей таблицы в ServiceNow:</span><span class="sxs-lookup"><span data-stu-id="14fcb-116">If you want to crawl user and group identities to honor access permissions of knowledge articles in Microsoft Search results, the account should have access to read the following table records in ServiceNow:</span></span>
>* <span data-ttu-id="14fcb-117">kb_uc_can_contribute_mtom</span><span class="sxs-lookup"><span data-stu-id="14fcb-117">kb_uc_can_contribute_mtom</span></span>
>* <span data-ttu-id="14fcb-118">kb_uc_can_read_mtom</span><span class="sxs-lookup"><span data-stu-id="14fcb-118">kb_uc_can_read_mtom</span></span>
>* <span data-ttu-id="14fcb-119">kb_uc_cannot_read_mtom</span><span class="sxs-lookup"><span data-stu-id="14fcb-119">kb_uc_cannot_read_mtom</span></span>
>* <span data-ttu-id="14fcb-120">kb_uc_cannot_contribute_mtom</span><span class="sxs-lookup"><span data-stu-id="14fcb-120">kb_uc_cannot_contribute_mtom</span></span>
>* <span data-ttu-id="14fcb-121">sys_user</span><span class="sxs-lookup"><span data-stu-id="14fcb-121">sys_user</span></span>
>* <span data-ttu-id="14fcb-122">sys_user_has_role</span><span class="sxs-lookup"><span data-stu-id="14fcb-122">sys_user_has_role</span></span>
>* <span data-ttu-id="14fcb-123">sys_user_grmember</span><span class="sxs-lookup"><span data-stu-id="14fcb-123">sys_user_grmember</span></span>
>* <span data-ttu-id="14fcb-124">user_criteria</span><span class="sxs-lookup"><span data-stu-id="14fcb-124">user_criteria</span></span>
>* <span data-ttu-id="14fcb-125">kb_knowledge_base</span><span class="sxs-lookup"><span data-stu-id="14fcb-125">kb_knowledge_base</span></span>  
> <span data-ttu-id="14fcb-126">Вы можете создать и назначить роль для учетной записи, используемой для подключения к Microsoft Search.</span><span class="sxs-lookup"><span data-stu-id="14fcb-126">You can create and assign a role for the account you use to connect with Microsoft Search.</span></span> <span data-ttu-id="14fcb-127">Для этой роли можно назначить доступ на чтение к таблицам.</span><span class="sxs-lookup"><span data-stu-id="14fcb-127">Read access to the tables can be assigned on that role.</span></span> <span data-ttu-id="14fcb-128">Чтобы узнать о настройке доступа для чтения к записям таблицы, ознакомьтесь со статьей [Защита записей таблицы](https://developer.servicenow.com/dev.do#!/learn/learning-plans/orlando/new_to_servicenow/app_store_learnv2_securingapps_orlando_creating_and_editing_access_controls).</span><span class="sxs-lookup"><span data-stu-id="14fcb-128">To learn about setting read access to table records, see [Securing Table Records](https://developer.servicenow.com/dev.do#!/learn/learning-plans/orlando/new_to_servicenow/app_store_learnv2_securingapps_orlando_creating_and_editing_access_controls).</span></span>

<span data-ttu-id="14fcb-129">Для проверки подлинности и синхронизации контента из ServiceNow выберите **один из трех** поддерживаемых способов:</span><span class="sxs-lookup"><span data-stu-id="14fcb-129">To authenticate and sync content from ServiceNow, choose **one of three** supported methods:</span></span> 
1. <span data-ttu-id="14fcb-130">Обычная проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="14fcb-130">Basic authentication</span></span> 
2. <span data-ttu-id="14fcb-131">ServiceNow OAuth (рекомендуется)</span><span class="sxs-lookup"><span data-stu-id="14fcb-131">ServiceNow OAuth (recommended)</span></span>
3. <span data-ttu-id="14fcb-132">Azure AD OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="14fcb-132">Azure AD OpenID Connect</span></span>

#### <a name="basic-authentication"></a><span data-ttu-id="14fcb-133">Обычная проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="14fcb-133">Basic authentication</span></span>

<span data-ttu-id="14fcb-134">Введите имя пользователя и пароль учетной записи ServiceNow с ролью **базы знаний** для проверки подлинности в экземпляре.</span><span class="sxs-lookup"><span data-stu-id="14fcb-134">Enter the username and password of ServiceNow account with **knowledge** role to authenticate to your instance.</span></span>

#### <a name="servicenow-oauth"></a><span data-ttu-id="14fcb-135">OAuth OAuth</span><span class="sxs-lookup"><span data-stu-id="14fcb-135">ServiceNow OAuth</span></span>

<span data-ttu-id="14fcb-136">Чтобы использовать для проверки подлинности протоколы ServiceNow OAuth, администратору ServiceNow необходимо подготовить конечную точку в экземпляре ServiceNow, чтобы приложение Microsoft Search могло получить доступ к экземпляру.</span><span class="sxs-lookup"><span data-stu-id="14fcb-136">To use ServiceNow OAuth for authentication, a ServiceNow admin needs to provision an endpoint in your ServiceNow instance, so that the Microsoft Search app can access the instance.</span></span> <span data-ttu-id="14fcb-137">Чтобы узнать больше, ознакомьтесь со статьей [Создание конечной точки для доступа клиентов к экземпляру](https://docs.servicenow.com/bundle/newyork-platform-administration/page/administer/security/task/t_CreateEndpointforExternalClients.html) в документации ServiceNow.</span><span class="sxs-lookup"><span data-stu-id="14fcb-137">To learn more, see [Create an endpoint for clients to access the instance](https://docs.servicenow.com/bundle/newyork-platform-administration/page/administer/security/task/t_CreateEndpointforExternalClients.html) in the ServiceNow documentation.</span></span>

<span data-ttu-id="14fcb-138">В следующей таблице приведены указания по заполнению формы создания конечной точки:</span><span class="sxs-lookup"><span data-stu-id="14fcb-138">The following table provides guidance on how to fill out the endpoint creation form:</span></span>

<span data-ttu-id="14fcb-139">**Field**</span><span class="sxs-lookup"><span data-stu-id="14fcb-139">**Field**</span></span> | <span data-ttu-id="14fcb-140">**Описание**</span><span class="sxs-lookup"><span data-stu-id="14fcb-140">**Description**</span></span> | <span data-ttu-id="14fcb-141">**Рекомендуемое значение**</span><span class="sxs-lookup"><span data-stu-id="14fcb-141">**Recommended Value**</span></span>
--- | --- | ---
<span data-ttu-id="14fcb-142">Имя</span><span class="sxs-lookup"><span data-stu-id="14fcb-142">Name</span></span> | <span data-ttu-id="14fcb-143">Это уникальное значение определяет приложение, для которого требуется доступ OAuth.</span><span class="sxs-lookup"><span data-stu-id="14fcb-143">This unique value identifies the application that you require OAuth access for.</span></span> | <span data-ttu-id="14fcb-144">Поиск (Майкрософт)</span><span class="sxs-lookup"><span data-stu-id="14fcb-144">Microsoft Search</span></span>
<span data-ttu-id="14fcb-145">Идентификатор клиента</span><span class="sxs-lookup"><span data-stu-id="14fcb-145">Client ID</span></span> | <span data-ttu-id="14fcb-146">Автоматически созданный уникальный идентификатор приложения, предназначенный только для чтения.</span><span class="sxs-lookup"><span data-stu-id="14fcb-146">A read-only, auto-generated unique ID for the application.</span></span> <span data-ttu-id="14fcb-147">Экземпляр использует идентификатор клиента при запросе маркера доступа.</span><span class="sxs-lookup"><span data-stu-id="14fcb-147">The instance uses the client ID when it requests an access token.</span></span> | <span data-ttu-id="14fcb-148">Н/Д</span><span class="sxs-lookup"><span data-stu-id="14fcb-148">NA</span></span>
<span data-ttu-id="14fcb-149">Секрет клиента</span><span class="sxs-lookup"><span data-stu-id="14fcb-149">Client secret</span></span> | <span data-ttu-id="14fcb-150">С помощью этой общедоступной строки секрета экземпляр ServiceNow и служба поиска Microsoft авторизацию связи друг с другом.</span><span class="sxs-lookup"><span data-stu-id="14fcb-150">With this shared secret string, the ServiceNow instance and Microsoft Search authorize communications with each other.</span></span> | <span data-ttu-id="14fcb-151">Следуйте рекомендациям по обеспечению безопасности, рассматривая их как пароль.</span><span class="sxs-lookup"><span data-stu-id="14fcb-151">Follow security best-practices by treating this as a password.</span></span>
<span data-ttu-id="14fcb-152">URL-адрес перенаправления</span><span class="sxs-lookup"><span data-stu-id="14fcb-152">Redirect URL</span></span> | <span data-ttu-id="14fcb-153">Обязательный URL-адрес обратного вызова, на который перенаправляется сервер проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="14fcb-153">A required callback URL that the authorization server redirects to.</span></span> | https://gcs.office.com/v1.0/admin/oauth/callback
<span data-ttu-id="14fcb-154">URL-адрес эмблемы</span><span class="sxs-lookup"><span data-stu-id="14fcb-154">Logo URL</span></span> | <span data-ttu-id="14fcb-155">URL-адрес, содержащий изображение логотипа приложения.</span><span class="sxs-lookup"><span data-stu-id="14fcb-155">A URL that contains the image for the application logo.</span></span> | <span data-ttu-id="14fcb-156">Н/Д</span><span class="sxs-lookup"><span data-stu-id="14fcb-156">NA</span></span>
<span data-ttu-id="14fcb-157">Активное</span><span class="sxs-lookup"><span data-stu-id="14fcb-157">Active</span></span> | <span data-ttu-id="14fcb-158">Установите флажок, чтобы активировать реестр приложения.</span><span class="sxs-lookup"><span data-stu-id="14fcb-158">Select the check box to make the application registry active.</span></span> | <span data-ttu-id="14fcb-159">Значение Active</span><span class="sxs-lookup"><span data-stu-id="14fcb-159">Set to active</span></span>
<span data-ttu-id="14fcb-160">Срок действия маркера обновления</span><span class="sxs-lookup"><span data-stu-id="14fcb-160">Refresh token lifespan</span></span> | <span data-ttu-id="14fcb-161">Время (в секундах), в течение которого действует маркер обновления.</span><span class="sxs-lookup"><span data-stu-id="14fcb-161">The number of seconds that a refresh token is valid.</span></span> <span data-ttu-id="14fcb-162">По умолчанию срок действия маркеров обновления истечет через 100 дней (8640000 секунд).</span><span class="sxs-lookup"><span data-stu-id="14fcb-162">By default, refresh tokens expire in 100 days (8640000 seconds).</span></span> | <span data-ttu-id="14fcb-163">31 536 000 (1 год)</span><span class="sxs-lookup"><span data-stu-id="14fcb-163">31,536,000 (1 year)</span></span>
<span data-ttu-id="14fcb-164">Срок действия маркеров доступа</span><span class="sxs-lookup"><span data-stu-id="14fcb-164">Access token lifespan</span></span> | <span data-ttu-id="14fcb-165">Количество секунд, в течение которого действует маркер доступа.</span><span class="sxs-lookup"><span data-stu-id="14fcb-165">The number of seconds that an access token is valid.</span></span> | <span data-ttu-id="14fcb-166">43 200 (12 часов)</span><span class="sxs-lookup"><span data-stu-id="14fcb-166">43,200 (12 hours)</span></span>

<span data-ttu-id="14fcb-167">Введите идентификатор клиента и секрет клиента, чтобы подключиться к экземпляру.</span><span class="sxs-lookup"><span data-stu-id="14fcb-167">Enter the client id and client secret to connect to your instance.</span></span> <span data-ttu-id="14fcb-168">После подключения используйте учетные данные учетной записи ServiceNow для проверки подлинности для обхода.</span><span class="sxs-lookup"><span data-stu-id="14fcb-168">After connecting, use a ServiceNow account credential to authenticate permission to crawl.</span></span> <span data-ttu-id="14fcb-169">Учетная запись должна иметь по крайней мере роль **базы знаний** .</span><span class="sxs-lookup"><span data-stu-id="14fcb-169">The account should at least have **knowledge** role.</span></span>

#### <a name="azure-ad-openid-connect"></a><span data-ttu-id="14fcb-170">Azure AD OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="14fcb-170">Azure AD OpenID Connect</span></span>

<span data-ttu-id="14fcb-171">Чтобы использовать Azure AD OpenID Connect для проверки подлинности, выполните указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="14fcb-171">To use Azure AD OpenID Connect for authentication, follow the steps below.</span></span>

###### <a name="step-1-register-a-new-application-in-azure-active-directory"></a><span data-ttu-id="14fcb-172">Шаг 1: регистрация нового приложения в Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="14fcb-172">Step 1: Register a new application in Azure Active Directory</span></span>

<span data-ttu-id="14fcb-173">Сведения о регистрации нового приложения в Azure Active Directory см в разделе [Регистрация приложения](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#register-an-application).</span><span class="sxs-lookup"><span data-stu-id="14fcb-173">To learn about registering a new application in Azure Active Directory, see [Register an application](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#register-an-application).</span></span> <span data-ttu-id="14fcb-174">Выберите один организационный каталог клиента.</span><span class="sxs-lookup"><span data-stu-id="14fcb-174">Select single tenant organizational directory.</span></span> <span data-ttu-id="14fcb-175">URI перенаправления не требуется.</span><span class="sxs-lookup"><span data-stu-id="14fcb-175">Redirect URI is not needed.</span></span> <span data-ttu-id="14fcb-176">После регистрации Обратите внимание на идентификатор приложения (клиента) и идентификатор каталога (клиента).</span><span class="sxs-lookup"><span data-stu-id="14fcb-176">After registration, note down the Application (client) ID and Directory (tenant) ID.</span></span>

###### <a name="step-2-create-a-client-secret"></a><span data-ttu-id="14fcb-177">Шаг 2: создание секрета клиента</span><span class="sxs-lookup"><span data-stu-id="14fcb-177">Step 2: Create a client secret</span></span>

<span data-ttu-id="14fcb-178">Чтобы узнать о создании секрета клиента, ознакомьтесь [со статьей Создание секрета клиента](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#add-a-client-secret).</span><span class="sxs-lookup"><span data-stu-id="14fcb-178">To learn about creating a client secret, see [Creating a client secret](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#add-a-client-secret).</span></span> <span data-ttu-id="14fcb-179">Запишите секрет клиента.</span><span class="sxs-lookup"><span data-stu-id="14fcb-179">Take a note of client secret.</span></span>

###### <a name="step-3-retrieve-service-principal-object-identifier"></a><span data-ttu-id="14fcb-180">Шаг 3: получение идентификатора объекта участника службы</span><span class="sxs-lookup"><span data-stu-id="14fcb-180">Step 3: Retrieve Service Principal Object Identifier</span></span>

<span data-ttu-id="14fcb-181">Выполните действия, чтобы получить идентификатор объекта участника службы.</span><span class="sxs-lookup"><span data-stu-id="14fcb-181">Follow the steps to retrieve Service Principal Object Identifier</span></span>

1. <span data-ttu-id="14fcb-182">Запуск PowerShell</span><span class="sxs-lookup"><span data-stu-id="14fcb-182">Run PowerShell</span></span>
2. <span data-ttu-id="14fcb-183">Установите Azure PowerShell с помощью следующей команды:</span><span class="sxs-lookup"><span data-stu-id="14fcb-183">Install Azure PowerShell using the following command</span></span>
```<language>
   Install-Module -Name Az -AllowClobber -Scope CurrentUser
```
3. <span data-ttu-id="14fcb-184">Подключение к Azure</span><span class="sxs-lookup"><span data-stu-id="14fcb-184">Connect to Azure</span></span>
```<language>
    Connect-AzAccount
```
4. <span data-ttu-id="14fcb-185">Получение идентификатора объекта участника службы</span><span class="sxs-lookup"><span data-stu-id="14fcb-185">Get Service Principal Object Identifier</span></span>
```<language>
   Get-AzADServicePrincipal -ApplicationId "Application-ID"
```
<span data-ttu-id="14fcb-186">Замените "Application-ID" ИДЕНТИФИКАТОРом приложения (без кавычек) приложения, зарегистрированного на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="14fcb-186">Replace "Application-ID" with Application (client) ID (without quotes) of the application you registered in step 1.</span></span> <span data-ttu-id="14fcb-187">Обратите внимание на значение Object ID из выходных данных PowerShell.</span><span class="sxs-lookup"><span data-stu-id="14fcb-187">Note the value of ID object from PowerShell output.</span></span> <span data-ttu-id="14fcb-188">Это идентификатор субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="14fcb-188">It is the Service Principal ID.</span></span>

<span data-ttu-id="14fcb-189">Теперь у вас есть все сведения, необходимые для портала Azure.</span><span class="sxs-lookup"><span data-stu-id="14fcb-189">Now you have all the information required from Azure portal.</span></span> <span data-ttu-id="14fcb-190">В приведенной ниже таблице указаны краткие сведения об этих сведениях.</span><span class="sxs-lookup"><span data-stu-id="14fcb-190">A quick summary of the information is given in the table below.</span></span>

<span data-ttu-id="14fcb-191">**Свойство**</span><span class="sxs-lookup"><span data-stu-id="14fcb-191">**Property**</span></span> | <span data-ttu-id="14fcb-192">**Описание**</span><span class="sxs-lookup"><span data-stu-id="14fcb-192">**Description**</span></span>
--- | ---
<span data-ttu-id="14fcb-193">Идентификатор каталога (идентификатор клиента)</span><span class="sxs-lookup"><span data-stu-id="14fcb-193">Directory ID (Tenant ID)</span></span> | <span data-ttu-id="14fcb-194">Это уникальный идентификатор, который ссылается на клиента Azure Active Directory (из шага 1).</span><span class="sxs-lookup"><span data-stu-id="14fcb-194">This is a unique ID referring the Azure Active Directory tenant (from step 1).</span></span>
<span data-ttu-id="14fcb-195">Идентификатор приложения (идентификатор клиента)</span><span class="sxs-lookup"><span data-stu-id="14fcb-195">Application ID (Client ID)</span></span> | <span data-ttu-id="14fcb-196">Это уникальный идентификатор, который ссылается на приложение, зарегистрированное на шаге 1.</span><span class="sxs-lookup"><span data-stu-id="14fcb-196">This is a unique ID referring the application registered in step 1.</span></span>
<span data-ttu-id="14fcb-197">Секрет клиента</span><span class="sxs-lookup"><span data-stu-id="14fcb-197">Client Secret</span></span> | <span data-ttu-id="14fcb-198">Это секретный ключ приложения (из шага 2).</span><span class="sxs-lookup"><span data-stu-id="14fcb-198">This is the secret key of the application (from step 2).</span></span> <span data-ttu-id="14fcb-199">Рассматривать его как пароль.</span><span class="sxs-lookup"><span data-stu-id="14fcb-199">Treat it like a password.</span></span>
<span data-ttu-id="14fcb-200">ИДЕНТИФИКАТОР субъекта службы</span><span class="sxs-lookup"><span data-stu-id="14fcb-200">Service Principal ID</span></span> | <span data-ttu-id="14fcb-201">Удостоверение приложения, работающего в качестве службы.</span><span class="sxs-lookup"><span data-stu-id="14fcb-201">An identity for the application running as a service.</span></span> <span data-ttu-id="14fcb-202">(из шага 3)</span><span class="sxs-lookup"><span data-stu-id="14fcb-202">(from step 3)</span></span>

###### <a name="step-4-register-servicenow-application"></a><span data-ttu-id="14fcb-203">Шаг 4: регистрация приложения ServiceNow</span><span class="sxs-lookup"><span data-stu-id="14fcb-203">Step 4: Register ServiceNow Application</span></span>

<span data-ttu-id="14fcb-204">В экземпляре ServiceNow необходимо выполнить следующие настройки.</span><span class="sxs-lookup"><span data-stu-id="14fcb-204">The following configuration need to be done in the ServiceNow instance.</span></span>

1. <span data-ttu-id="14fcb-205">Зарегистрируйте новый объект OAuth ОИДК.</span><span class="sxs-lookup"><span data-stu-id="14fcb-205">Register a new OAuth OIDC entity.</span></span> <span data-ttu-id="14fcb-206">Чтобы узнать больше, ознакомьтесь со статьей [Создание поставщика OAuth оидк](https://docs.servicenow.com/bundle/orlando-platform-administration/page/administer/security/task/add-OIDC-entity.html).</span><span class="sxs-lookup"><span data-stu-id="14fcb-206">To learn, see [Create an OAuth OIDC provider](https://docs.servicenow.com/bundle/orlando-platform-administration/page/administer/security/task/add-OIDC-entity.html).</span></span>
2. <span data-ttu-id="14fcb-207">В следующей таблице приведены рекомендации по заполнению регистрационной формы поставщика ОИДК</span><span class="sxs-lookup"><span data-stu-id="14fcb-207">The following table provides guidance on how to fill out OIDC provider registration form</span></span>

<span data-ttu-id="14fcb-208">**Field**</span><span class="sxs-lookup"><span data-stu-id="14fcb-208">**Field**</span></span> | <span data-ttu-id="14fcb-209">**Описание**</span><span class="sxs-lookup"><span data-stu-id="14fcb-209">**Description**</span></span> | <span data-ttu-id="14fcb-210">**Рекомендуемое значение**</span><span class="sxs-lookup"><span data-stu-id="14fcb-210">**Recommended Value**</span></span>
--- | --- | ---
<span data-ttu-id="14fcb-211">Имя</span><span class="sxs-lookup"><span data-stu-id="14fcb-211">Name</span></span> | <span data-ttu-id="14fcb-212">Уникальное имя, идентифицирующее объект OAuth ОИДК.</span><span class="sxs-lookup"><span data-stu-id="14fcb-212">A unique name that identifies the OAuth OIDC entity.</span></span> | <span data-ttu-id="14fcb-213">Azure AD</span><span class="sxs-lookup"><span data-stu-id="14fcb-213">Azure AD</span></span>
<span data-ttu-id="14fcb-214">Идентификатор клиента</span><span class="sxs-lookup"><span data-stu-id="14fcb-214">Client ID</span></span> | <span data-ttu-id="14fcb-215">Идентификатор клиента приложения, зарегистрированного на сервере OAuth ОИДК (OAuth).</span><span class="sxs-lookup"><span data-stu-id="14fcb-215">The client ID of the application registered in the third-party OAuth OIDC server.</span></span> <span data-ttu-id="14fcb-216">Экземпляр использует идентификатор клиента при запросе маркера доступа.</span><span class="sxs-lookup"><span data-stu-id="14fcb-216">The instance uses the client ID when requesting an access token.</span></span> | <span data-ttu-id="14fcb-217">Идентификатор Application (Client) из шага 1</span><span class="sxs-lookup"><span data-stu-id="14fcb-217">Application (Client) ID from step 1</span></span>
<span data-ttu-id="14fcb-218">Секрет клиента</span><span class="sxs-lookup"><span data-stu-id="14fcb-218">Client Secret</span></span> | <span data-ttu-id="14fcb-219">Секрет клиента приложения, зарегистрированного на сервере OAuth ОИДК (OAuth).</span><span class="sxs-lookup"><span data-stu-id="14fcb-219">The client secret of the application registered in the third-party OAuth OIDC server.</span></span> | <span data-ttu-id="14fcb-220">Секрет клиента из шага 2</span><span class="sxs-lookup"><span data-stu-id="14fcb-220">Client Secret from step 2</span></span>

<span data-ttu-id="14fcb-221">Все остальные значения могут быть заданы по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="14fcb-221">All other values can be default.</span></span>

3. <span data-ttu-id="14fcb-222">В форме регистрации поставщика ОИДК необходимо добавить новую конфигурацию поставщика ОИДК.</span><span class="sxs-lookup"><span data-stu-id="14fcb-222">In the OIDC provider registration form, you need to add a new OIDC provider configuration.</span></span> <span data-ttu-id="14fcb-223">Щелкните значок поиска в поле *Конфигурация поставщика Оидк OAuth* , чтобы открыть записи конфигураций оидк.</span><span class="sxs-lookup"><span data-stu-id="14fcb-223">Click the search icon against *OAuth OIDC Provider Configuration* field to open the records of OIDC configurations.</span></span> <span data-ttu-id="14fcb-224">Нажмите кнопку Создать.</span><span class="sxs-lookup"><span data-stu-id="14fcb-224">Click New.</span></span>
4. <span data-ttu-id="14fcb-225">В следующей таблице приведены рекомендации по заполнению формы конфигурации поставщика ОИДК</span><span class="sxs-lookup"><span data-stu-id="14fcb-225">The following table provides guidance on how to fill out OIDC provider configuration form</span></span>

<span data-ttu-id="14fcb-226">**Поле**</span><span class="sxs-lookup"><span data-stu-id="14fcb-226">**Field**</span></span> | <span data-ttu-id="14fcb-227">**Рекомендуемое значение**</span><span class="sxs-lookup"><span data-stu-id="14fcb-227">**Recommended Value**</span></span>
--- | ---
<span data-ttu-id="14fcb-228">Поставщик ОИДК</span><span class="sxs-lookup"><span data-stu-id="14fcb-228">OIDC Provider</span></span> |  <span data-ttu-id="14fcb-229">Azure AD</span><span class="sxs-lookup"><span data-stu-id="14fcb-229">Azure AD</span></span>
<span data-ttu-id="14fcb-230">URL-адрес метаданных ОИДК</span><span class="sxs-lookup"><span data-stu-id="14fcb-230">OIDC Metadata URL</span></span> | <span data-ttu-id="14fcb-231">Это должно быть в формате HTTPS \: //логин.микрософтонлине.ком/"тенандид"/.Велл-кновн/опенид-конфигуратион</span><span class="sxs-lookup"><span data-stu-id="14fcb-231">This must be in the form https\://login.microsoftonline.com/"tenandId"/.well-known/openid-configuration</span></span> <br/><span data-ttu-id="14fcb-232">Замените "tenantID" на идентификатор каталога (клиента) из шага 1 (без кавычек).</span><span class="sxs-lookup"><span data-stu-id="14fcb-232">Replace "tenantID" with Directory (tenant) ID from step 1 (without quotes).</span></span>
<span data-ttu-id="14fcb-233">Жизненный цикл кэша конфигурации ОИДК</span><span class="sxs-lookup"><span data-stu-id="14fcb-233">OIDC Configuration Cache Life Span</span></span> |  <span data-ttu-id="14fcb-234">120</span><span class="sxs-lookup"><span data-stu-id="14fcb-234">120</span></span>
<span data-ttu-id="14fcb-235">Для приложений</span><span class="sxs-lookup"><span data-stu-id="14fcb-235">Application</span></span> | <span data-ttu-id="14fcb-236">Глобальные</span><span class="sxs-lookup"><span data-stu-id="14fcb-236">Global</span></span>
<span data-ttu-id="14fcb-237">Утверждение пользователя</span><span class="sxs-lookup"><span data-stu-id="14fcb-237">User Claim</span></span> | <span data-ttu-id="14fcb-238">sub</span><span class="sxs-lookup"><span data-stu-id="14fcb-238">sub</span></span>
<span data-ttu-id="14fcb-239">Поле пользователя</span><span class="sxs-lookup"><span data-stu-id="14fcb-239">User Field</span></span> | <span data-ttu-id="14fcb-240">Идентификатор пользователя</span><span class="sxs-lookup"><span data-stu-id="14fcb-240">User ID</span></span>
<span data-ttu-id="14fcb-241">Включение проверки утверждения ЖТИ</span><span class="sxs-lookup"><span data-stu-id="14fcb-241">Enable JTI claim verification</span></span> | <span data-ttu-id="14fcb-242">Отключено</span><span class="sxs-lookup"><span data-stu-id="14fcb-242">Disabled</span></span>

5. <span data-ttu-id="14fcb-243">Нажмите кнопку послать и обновите форму объекта OAuth ОИДК.</span><span class="sxs-lookup"><span data-stu-id="14fcb-243">Click Submit and Update the OAuth OIDC Entity form.</span></span>

###### <a name="step-5-create-a-servicenow-account"></a><span data-ttu-id="14fcb-244">Шаг 5: создание учетной записи ServiceNow</span><span class="sxs-lookup"><span data-stu-id="14fcb-244">Step 5: Create a ServiceNow account</span></span>

<span data-ttu-id="14fcb-245">Ознакомьтесь с инструкциями по созданию учетной записи ServiceNow и [Создайте пользователя в servicenow](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_CreateAUser.html).</span><span class="sxs-lookup"><span data-stu-id="14fcb-245">Refer the instructions to create a ServiceNow account, [create a user in ServiceNow](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_CreateAUser.html).</span></span>

<span data-ttu-id="14fcb-246">В следующей таблице приведены рекомендации по заполнению регистрации учетной записи пользователя ServiceNow</span><span class="sxs-lookup"><span data-stu-id="14fcb-246">The following table provides guidance on how to fill out the ServiceNow user account registration</span></span>

<span data-ttu-id="14fcb-247">**Поле**</span><span class="sxs-lookup"><span data-stu-id="14fcb-247">**Field**</span></span> | <span data-ttu-id="14fcb-248">**Рекомендуемое значение**</span><span class="sxs-lookup"><span data-stu-id="14fcb-248">**Recommended Value**</span></span>
--- | ---
<span data-ttu-id="14fcb-249">Идентификатор пользователя</span><span class="sxs-lookup"><span data-stu-id="14fcb-249">User ID</span></span> | <span data-ttu-id="14fcb-250">ИДЕНТИФИКАТОР субъекта службы из шага 3</span><span class="sxs-lookup"><span data-stu-id="14fcb-250">Service Principal ID from step 3</span></span>
<span data-ttu-id="14fcb-251">Только доступ к веб-службе</span><span class="sxs-lookup"><span data-stu-id="14fcb-251">Web service access only</span></span> | <span data-ttu-id="14fcb-252">Checked</span><span class="sxs-lookup"><span data-stu-id="14fcb-252">Checked</span></span>

<span data-ttu-id="14fcb-253">Все остальные значения могут быть оставлены по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="14fcb-253">All other values can be left to default.</span></span>

###### <a name="step-6-enable-knowledge-role-for-the-servicenow-account"></a><span data-ttu-id="14fcb-254">Шаг 6: включение ролика базы знаний для учетной записи ServiceNow</span><span class="sxs-lookup"><span data-stu-id="14fcb-254">Step 6: Enable Knowledge role for the ServiceNow account</span></span>

<span data-ttu-id="14fcb-255">Получите доступ к учетной записи ServiceNow, созданной с помощью идентификатора субъекта ServiceNow, в качестве идентификатора пользователя и назначьте роль базы знаний.</span><span class="sxs-lookup"><span data-stu-id="14fcb-255">Access the ServiceNow account you created with ServiceNow Principal ID as User ID and assign the knowledge role.</span></span> <span data-ttu-id="14fcb-256">Инструкции по назначению роли учетной записи ServiceNow можно найти здесь, [назначив пользователю роль](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).</span><span class="sxs-lookup"><span data-stu-id="14fcb-256">Instructions to assigning a role to a ServiceNow account can be found here, [assign a role to a user](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).</span></span>

<span data-ttu-id="14fcb-257">Используйте идентификатор приложения в качестве идентификатора клиента (из шага 1) и секрет клиента (из шага 2) в мастере настройки центра администрирования для проверки подлинности в экземпляре ServiceNow с помощью Azure AD OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="14fcb-257">Use Application ID as Client ID (from step 1), and Client secret (from step 2) in admin center configuration wizard to authenticate to your ServiceNow instance using Azure AD OpenID Connect.</span></span>

## <a name="filter-data"></a><span data-ttu-id="14fcb-258">Фильтрация данных</span><span class="sxs-lookup"><span data-stu-id="14fcb-258">Filter data</span></span>

<span data-ttu-id="14fcb-259">С помощью строки запроса ServiceNow вы можете указать условия синхронизации статей.</span><span class="sxs-lookup"><span data-stu-id="14fcb-259">With a ServiceNow query string, you can specify conditions for syncing articles.</span></span> <span data-ttu-id="14fcb-260">Оно аналогично предложению **WHERE** в операторе **SQL SELECT** .</span><span class="sxs-lookup"><span data-stu-id="14fcb-260">It's like a **Where** clause in a **SQL Select** statement.</span></span> <span data-ttu-id="14fcb-261">Например, можно индексировать только опубликованные и активные статьи.</span><span class="sxs-lookup"><span data-stu-id="14fcb-261">For example, you can choose to index only articles that are published and active.</span></span> <span data-ttu-id="14fcb-262">Чтобы узнать о создании собственной строки запроса, ознакомьтесь со [статьей Создание закодированной строки запроса с помощью фильтра](https://docs.servicenow.com/bundle/paris-platform-user-interface/page/use/using-lists/task/t_GenEncodQueryStringFilter.html).</span><span class="sxs-lookup"><span data-stu-id="14fcb-262">To learn about creating your own query string, see [Generate an encoded query string using a filter](https://docs.servicenow.com/bundle/paris-platform-user-interface/page/use/using-lists/task/t_GenEncodQueryStringFilter.html).</span></span>

## <a name="manage-search-permissions"></a><span data-ttu-id="14fcb-263">Управление разрешениями поиска</span><span class="sxs-lookup"><span data-stu-id="14fcb-263">Manage search permissions</span></span>

<span data-ttu-id="14fcb-264">Соединитель ServiceNow поддерживает разрешения поиска, видимые **всем** или **только пользователям, у которых есть доступ к этому источнику данных**.</span><span class="sxs-lookup"><span data-stu-id="14fcb-264">The ServiceNow connector supports search permissions visible to **Everyone** or **Only people with access to this data source**.</span></span> <span data-ttu-id="14fcb-265">Индексированные данные отображаются в результатах поиска и видимы всем пользователям в организации или пользователям, имеющим доступ к ним соответственно.</span><span class="sxs-lookup"><span data-stu-id="14fcb-265">Indexed data appears in the search results and is visible to all users in the organization or users who have access to them respectively.</span></span> <span data-ttu-id="14fcb-266">Соединитель ServiceNow поддерживает разрешения по умолчанию для критериев пользователя без сложных сценариев.</span><span class="sxs-lookup"><span data-stu-id="14fcb-266">ServiceNow Connector supports default user criteria permissions without advanced scripts.</span></span> <span data-ttu-id="14fcb-267">Когда соединитель обнаруживает критерии пользователя с помощью расширенного скрипта, все данные, использующие эти критерии пользователя, не будут отображаться в результатах поиска.</span><span class="sxs-lookup"><span data-stu-id="14fcb-267">When the connector encounters a user criteria with advanced script, all data using that user criteria will not be showed in search results.</span></span>

<span data-ttu-id="14fcb-268">Если вы выбрали **только тех пользователей, у которых есть доступ к этому источнику данных**, необходимо еще больше выбирать, будет ли экземпляру ServiceNow иметь пользователей, подготовленных в Azure Active Directory (AAD), или пользователей, не являющихся AAD.</span><span class="sxs-lookup"><span data-stu-id="14fcb-268">If you choose **Only people with access to this data source**, you need to further choose whether your ServiceNow instance has Azure Active Directory (AAD) provisioned users or Non-AAD users.</span></span>

>[!NOTE]
><span data-ttu-id="14fcb-269">Если вы выбрали **только тех пользователей, у которых есть доступ к этому источнику данных**, вы можете **Просмотреть** соединитель ServiceNow.</span><span class="sxs-lookup"><span data-stu-id="14fcb-269">The ServiceNow connector is in **preview** if you choose **Only people with access to this data source**.</span></span>

>[!NOTE]
><span data-ttu-id="14fcb-270">Если вы выбрали тип AAD в качестве источника удостоверений, убедитесь, что вы назначаете свойству Source имени участника-пользователя целевое свойство электронной почты в ServiceNow.</span><span class="sxs-lookup"><span data-stu-id="14fcb-270">If you choose AAD as the type of identity source, make sure you are assigning UPN source property to email targeted property in ServiceNow.</span></span> <span data-ttu-id="14fcb-271">Чтобы проверить или изменить сопоставления, ознакомьтесь со статьей [Настройка сопоставлений атрибутов подготовки пользователей для приложений SaaS в Azure Active Directory](https://docs.microsoft.com/azure/active-directory/app-provisioning/customize-application-attributes).</span><span class="sxs-lookup"><span data-stu-id="14fcb-271">To verify or change your mappings, see [Customizing user provisioning attribute-mappings for SaaS applications in Azure Active Directory](https://docs.microsoft.com/azure/active-directory/app-provisioning/customize-application-attributes).</span></span>

<span data-ttu-id="14fcb-272">Если вы решили присвоить список управления доступом из экземпляра ServiceNow и выбрали "non – AAD" для типа удостоверения, ознакомьтесь со статьей Сопоставление удостоверений, [не являющихся Azure AD](map-non-aad.md) , для получения инструкций по сопоставлению удостоверений.</span><span class="sxs-lookup"><span data-stu-id="14fcb-272">If you chose to ingest an ACL from your ServiceNow instance and selected "non-AAD" for the identity type see [Map your non-Azure AD Identities](map-non-aad.md) for instructions on mapping the identities.</span></span>

## <a name="assign-property-labels"></a><span data-ttu-id="14fcb-273">Назначение меток свойств</span><span class="sxs-lookup"><span data-stu-id="14fcb-273">Assign property labels</span></span>

<span data-ttu-id="14fcb-274">Можно назначить свойство источника каждой метке, выбрав в меню пункт Параметры.</span><span class="sxs-lookup"><span data-stu-id="14fcb-274">You can assign a source property to each label by choosing from a menu of options.</span></span> <span data-ttu-id="14fcb-275">Хотя это действие не является обязательным, наличие некоторых меток свойств повысит релевантность поиска и обеспечит более точные результаты поиска для конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="14fcb-275">While this step is not mandatory, having some property labels will improve the search relevance and ensure more accurate search results for end users.</span></span>

## <a name="manage-schema"></a><span data-ttu-id="14fcb-276">Управление схемой</span><span class="sxs-lookup"><span data-stu-id="14fcb-276">Manage schema</span></span>

<span data-ttu-id="14fcb-277">На экране **Управление схемой** можно изменить атрибуты схемы (возможность **запроса**, возможность **поиска**, **Извлечение** и **уточнение**), связанные со свойствами, добавить необязательные псевдонимы и выбрать свойство **содержимого** .</span><span class="sxs-lookup"><span data-stu-id="14fcb-277">On the **Manage Schema** screen, you have the option to change the schema attributes (**queryable**, **searchable**, **retrievable**, and **refinable**) associated with the properties, add optional aliases, and choose the **Content** property.</span></span>

## <a name="set-the-refresh-schedule"></a><span data-ttu-id="14fcb-278">Настройка расписания обновления</span><span class="sxs-lookup"><span data-stu-id="14fcb-278">Set the refresh schedule</span></span>

<span data-ttu-id="14fcb-279">Соединитель ServiceNow поддерживает расписания обновления для полных и добавочных обходов контента.</span><span class="sxs-lookup"><span data-stu-id="14fcb-279">The ServiceNow connector supports refresh schedules for both full and incremental crawls.</span></span> <span data-ttu-id="14fcb-280">Рекомендуется задать оба параметра.</span><span class="sxs-lookup"><span data-stu-id="14fcb-280">We recommend that you set both.</span></span>

<span data-ttu-id="14fcb-281">Расписание полного обхода контента находит удаленные статьи, которые ранее были синхронизированы с индексом поиска Microsoft Search, и все статьи, которые были перемещены из фильтра синхронизации.</span><span class="sxs-lookup"><span data-stu-id="14fcb-281">A full crawl schedule finds deleted articles that were previously synced to the Microsoft Search index and any articles that moved out of the sync filter.</span></span> <span data-ttu-id="14fcb-282">При первом подключении к ServiceNow для синхронизации всех статей базы знаний выполняется полный обход контента.</span><span class="sxs-lookup"><span data-stu-id="14fcb-282">When you first connect to ServiceNow, a full crawl runs to sync all the knowledge-base articles.</span></span> <span data-ttu-id="14fcb-283">Для синхронизации новых элементов и внесения обновлений необходимо запланировать добавочные обходы контента.</span><span class="sxs-lookup"><span data-stu-id="14fcb-283">To sync new items and make updates, you need to schedule incremental crawls.</span></span>

<span data-ttu-id="14fcb-284">Рекомендуемое значение по умолчанию — один день для полного обхода и четыре часа для добавочного обхода.</span><span class="sxs-lookup"><span data-stu-id="14fcb-284">The recommended default is one day for a full crawl and four hours for an incremental crawl.</span></span>
>[!NOTE]
><span data-ttu-id="14fcb-285">Для удостоверений будет применено только запланированное полное сканирование.</span><span class="sxs-lookup"><span data-stu-id="14fcb-285">For identities, only full crawl scheduled will be applied.</span></span>

## <a name="review-and-publish"></a><span data-ttu-id="14fcb-286">Просмотр и публикация</span><span class="sxs-lookup"><span data-stu-id="14fcb-286">Review and publish</span></span>

<span data-ttu-id="14fcb-287">После настройки соединителя можно просмотреть и опубликовать подключение.</span><span class="sxs-lookup"><span data-stu-id="14fcb-287">After you configure your connector, you can review and publish the connection.</span></span>

## <a name="next-steps"></a><span data-ttu-id="14fcb-288">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="14fcb-288">Next steps</span></span>

<span data-ttu-id="14fcb-289">После публикации подключения необходимо настроить страницу результатов поиска.</span><span class="sxs-lookup"><span data-stu-id="14fcb-289">After publishing the connection, you need to customize the search results page.</span></span> <span data-ttu-id="14fcb-290">Чтобы узнать больше о настройке результатов поиска, ознакомьтесь [со статьей Настройка страницы результатов поиска](https://docs.microsoft.com/microsoftsearch/configure-connector#next-steps-customize-the-search-results-page).</span><span class="sxs-lookup"><span data-stu-id="14fcb-290">To learn about customizing search results, see [Customize the search results page](https://docs.microsoft.com/microsoftsearch/configure-connector#next-steps-customize-the-search-results-page).</span></span>
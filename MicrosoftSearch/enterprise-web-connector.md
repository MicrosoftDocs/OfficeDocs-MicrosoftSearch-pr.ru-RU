---
title: Соединители Graph корпоративных веб-сайтов для Поиска (Майкрософт)
ms.author: mecampos
author: mecampos
manager: umas
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Настройка соединители Graph корпоративных веб-сайтов для Поиска (Майкрософт)
ms.openlocfilehash: 526b36a798f50bed457832d576ffebd15820184d
ms.sourcegitcommit: d53b91f8f52a4a96281b66831c2449bbffe2177c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/03/2021
ms.locfileid: "50097433"
---
<!---Previous ms.author: monaray --->

<!-- markdownlint-disable no-inline-html -->

# <a name="enterprise-websites-graph-connector"></a>Соединители Graph для корпоративных веб-сайтов

Соединители Graph корпоративных веб-сайтов позволяют организации индексировать статьи и контент с внутренних **веб-сайтов.** После настройки соединители и синхронизации контента с веб-сайта конечные пользователи смогут искать этот контент из любого клиента Поиска (Майкрософт).

> [!NOTE]
> Прочитайте [**статью "Настройка соединители Graph",**](configure-connector.md) чтобы ознакомиться с общим процессом настройки соединители Graph.

Эта статья для всех, кто настраивает, запускает и отслеживает соединители корпоративных веб-сайтов. Он дополняет общий процесс настройки и показывает инструкции, применимые только к соединитеструктору корпоративных веб-сайтов. В этой статье также содержатся сведения об [устранении неполадок](#troubleshooting) [и ограничениях.](#limitations)

<!---## Before you get started-->

<!---Insert "Before you get started" recommendations for this data source-->

## <a name="step-1-add-a-graph-connector-in-the-microsoft-365-admin-center"></a>Шаг 1. Добавление соединителю Graph в Центре администрирования Microsoft 365

Следуйте общим [инструкциям по настройке.](https://docs.microsoft.com/microsoftsearch/configure-connector)
<!---If the above phrase does not apply, delete it and insert specific details for your data source that are different from general setup instructions.-->

## <a name="step-2-name-the-connection"></a>Шаг 2. Имя подключения

Следуйте общим [инструкциям по настройке.](https://docs.microsoft.com/microsoftsearch/configure-connector)
<!---If the above phrase does not apply, delete it and insert specific details for your data source that are different from general setup instructions.-->

## <a name="step-3-configure-the-connection-settings"></a>Шаг 3. Настройка параметров подключения

Чтобы подключиться к источнику данных, необходимо ввести корневой URL-адрес веб-сайта, выбрать источник обхода контента и тип проверки подлинности, который вы хотите использовать: None, Basic Authentication или OAuth 2.0 с [Azure Active Directory (Azure AD).](https://docs.microsoft.com/azure/active-directory/) После получения этих сведений выберите "Проверить подключение", чтобы проверить параметры.

### <a name="url"></a>URL

Используйте поле URL-адреса, чтобы указать корневой сайт, который вы хотите обходить. Соединителятор корпоративных веб-сайтов будет использовать этот URL-адрес в качестве отправной точки и переходить по всем ссылкам с этого URL-адреса для обхода контента.

### <a name="crawl-mode-cloud-or-on-premises-preview"></a>Режим обхода: облако или локальное (предварительная версия)

Режим обхода контента определяет тип веб-сайтов, которые необходимо проиндексировать, как облачных, так и локально. Для облачных веб-сайтов выберите **"Облако"** в качестве режима обхода.

Кроме того, соединители теперь поддерживают обход контента на локальном веб-сайтах. Этот режим находится в режиме предварительной версии. Чтобы получить доступ к локальному данным, необходимо сначала установить и настроить агент соединителя Graph. Дополнительные данные см. в [агенте соединители Graph.](https://docs.microsoft.com/microsoftsearch/on-prem-agent)

Для локального **веб-сайтов** выберите  "Агент" в качестве режима обхода контента, а в поле локального агента выберите агент соединительных окне Graph, который вы установили и настроили ранее.  

> [!div class="mx-imgBorder"]
> ![Screenshot of Connection Settings pane for Enterprise Web connector](media/enterprise-web-connector/connectors-enterpriseweb-settings.png)

### <a name="authentication"></a>Проверка подлинности

Для базовой проверки подлинности требуется имя пользователя и пароль. Создайте эту учетную запись бота с помощью Центра администрирования [Microsoft 365.](https://admin.microsoft.com)

Для OAuth 2.0 с [Azure AD](https://docs.microsoft.com/azure/active-directory/) требуется ИД ресурса, ИД клиента и секрет клиента. OAuth 2.0 работает только в режиме облака.

Дополнительные сведения см. в сведениях о авторизации доступа к веб-приложениям Azure Active Directory с помощью потока предоставления кода [OAuth 2.0.](https://docs.microsoft.com/azure/active-directory/develop/v1-protocols-oauth-code) Зарегистрируйтесь со следующими значениями:

**Имя:** Поиск (Майкрософт) <br/>
**Redirect_URI:**`https://gcs.office.com/v1.0/admin/oauth/callback`

Чтобы получить значения для ресурса, client_id и client_secret, перейдите  к коду авторизации, чтобы запросить маркер доступа на веб-странице URL-адреса перенаправления.

Дополнительные сведения см. в [кратком примере: регистрация приложения с помощью платформы удостоверений Майкрософт.](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app)

## <a name="step-3a-add-urls-to-exclude-optional-crawl-restrictions"></a>Шаг 3a. Добавление URL-адресов для исключения (необязательные ограничения обхода)

Существует два способа запретить обход страниц: запретить их в файле robots.txt или добавить в список исключений.

### <a name="support-for-robotstxt"></a>Поддержка robots.txt

Соединители проверяют наличие robots.txt корневого сайта и, если он существует, он будет следовать указаниям, найденным в этом файле, и соблюдать их. Если соединитель не должен обходить определенные страницы или каталоги на сайте, вы можете вызвать эти страницы или каталоги в объявлениях "Disallow" в robots.txt файле.

### <a name="add-urls-to-exclude"></a>Добавление URL-адресов для исключения

При желании можно  создать список исключений, чтобы исключить некоторые URL-адреса из обхода, если этот контент является конфиденциальным или обход не стоит. Чтобы создать список исключений, просмотрите корневой URL-адрес. Вы можете добавить исключенные URL-адреса в список во время процесса настройки.

## <a name="step-4-assign-property-labels"></a>Шаг 4. Назначение меток свойств

Для каждой метки можно назначить свойство источника, выбрав в меню параметры. Хотя этот шаг не является обязательным, наличие некоторых меток свойств улучшит релевантность поиска и обеспечит более точные результаты поиска для конечных пользователей.

## <a name="step-5-manage-schema"></a>Шаг 5. Управление схемой

На  экране "Управление схемой" можно изменить атрибуты схемы (параметры "  **Запрос",**"Поиск", "Извлечение" и "Уточнение"), связанные со свойствами, добавить необязательные псевдонимы и выбрать свойство **Content.** 

## <a name="step-6-manage-search-permissions"></a>Шаг 6. Управление разрешениями поиска

Соединители корпоративных веб-сайтов поддерживают только разрешения поиска, видимые **всем.** Индексные данные появляются в результатах поиска и видны всем пользователям в организации.

## <a name="step-7-set-the-refresh-schedule"></a>Шаг 7. Настройка расписания обновления

Соединители корпоративных веб-сайтов поддерживают только полное обновление. Это означает, что во время каждого обновления соединитенок будет повторно обсбор всего контента веб-сайта. Чтобы убедиться, что соединитенду достаточно времени для обхода контента, рекомендуется установить большой интервал расписания обновления. Рекомендуется запланированное обновление от одной до двух недель.

## <a name="step-8-review-connection"></a>Шаг 8. Проверка подключения

Следуйте общим [инструкциям по настройке.](https://docs.microsoft.com/microsoftsearch/configure-connector)
<!---If the above phrase does not apply, delete it and insert specific details for your data source that are different from general setup instructions.-->

## <a name="troubleshooting"></a>Устранение неполадок

При чтении контента веб-сайта при обходе могут возникнуть некоторые исходные ошибки, представленные в подробных кодах ошибок ниже. Чтобы получить дополнительные сведения о типах  ошибок, перейдите на страницу сведений об ошибках после выбора подключения. Выберите код **ошибки,** чтобы увидеть более подробные ошибки. Дополнительные узнать также можно [в](https://docs.microsoft.com/microsoftsearch/manage-connector) подключении "Управление соединитетелем".

 Подробный код ошибки | Сообщение об ошибке
 --- | ---
 6001 | Сайт, который пытается проиндексировать, не достигается
 6005 | Исходные страницы, которые пытаются индексировать, заблокированы по robots.txt конфигурации.
 6008 | Не удается разрешить DNS
 6009 | Сведения обо всех клиентских ошибках (кроме HTTP 404, 408) см. в подробных кодах ошибок HTTP 4xx.
 6013 | Не удалось найти исходный лист, который пытается проиндексировать. (Ошибка HTTP 404)
 6018 | Исходный запрос не отвечает, и время отклика на запрос было иным. (Ошибка HTTP 408)
 6021 | На странице источника, которую пытаются проиндексировать, нет текстового содержимого на странице.
 6023 | Исходные страницы, которые пытаются проиндексировать, неподтверчены (а не HTML-страница)
 6024 | Исходный контент, который пытается индексировать, имеет неподтверченное содержимое.

* Ошибки 6001–6013 возникают, когда источник данных не может быть достигнут из-за сетевой проблемы или при удалении, перемещении или переименовании самого источника данных. Проверьте, являются ли предоставленные сведения о источнике данных действительными.
* Ошибки 6021-6024 возникают, когда источник данных содержит не текстовый контент на странице или страница не является HTML-кодом. Проверьте источник данных и добавьте эту страницу в список исключений или игнорируйте ошибку.

## <a name="limitations"></a>Ограничения

Соединители корпоративных веб-сайтов не поддерживают поиск данных на **динамических веб-странице.** Примеры этих веб-страниц хранятся в системах управления контентом, таких как [Confluence](https://www.atlassian.com/software/confluence) и [Unily,](https://www.unily.com/) или базах данных, в которой хранится контент веб-сайтов.
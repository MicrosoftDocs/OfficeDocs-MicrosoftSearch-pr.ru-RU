---
title: Соединители Salesforce Graph для Поиска (Майкрософт)
ms.author: mecampos
author: mecampos
manager: umas
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Настройка соединители Salesforce Graph для Поиска (Майкрософт)
ms.openlocfilehash: 6771bc0b234bc2570a8b1fa7174b9b9244cf3958
ms.sourcegitcommit: d53b91f8f52a4a96281b66831c2449bbffe2177c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/03/2021
ms.locfileid: "50097451"
---
<!---Previous ms.author: rusamai --->

# <a name="salesforce-graph-connector-preview"></a>Соединители Salesforce Graph (предварительная версия)

Соединители Salesforce Graph позволяют организации индексировать объекты Contacts, Opportunities, Leads и Accounts в экземпляре Salesforce. После настройки соединители и индекса контента из Salesforce конечные пользователи могут искать эти элементы из любого клиента Поиска (Майкрософт).

> [!NOTE]
> Прочитайте [**статью "Настройка соединители Graph",**](configure-connector.md) чтобы ознакомиться с общим процессом настройки соединители Graph.

Эта статья для всех, кто настраивает, запускает и отслеживает соединители Salesforce Graph. Он дополняет общий процесс настройки и показывает инструкции, применимые только к соединитену Salesforce Graph. В этой статье также содержатся сведения об [ограничениях.](#limitations)

>[!IMPORTANT]
>The Salesforce Graph connector currently supports Summer '19 or later.

## <a name="before-you-get-started"></a>Перед началом работы

Чтобы подключиться к экземпляру Salesforce, вам потребуется URL-адрес экземпляра Salesforce, ИД клиента и секрет клиента для проверки подлинности OAuth. Ниже рассказывается, как вы или администратор Salesforce можете получить эти сведения из своей учетной записи Salesforce.

- Войдите в экземпляр Salesforce и перейдите к установке

- Перейдите в app -> App Manager.

- Выберите **"Новое подключенные приложения".**

- Заполняйте раздел API следующим образом:

    - Выберите параметр "Включить **параметры Oauth".**

    - Укажите URL-адрес для вызова в качестве: [https://gcs.office.com/v1.0/admin/oauth/callback](https://gcs.office.com/v1.0/admin/oauth/callback)

    - Выберите эти необходимые области OAuth.

        - Доступ к данным (api) и управление ими

        - Выполнять запросы от вашего имени в любое время (refresh_token, offline_access)

    - Select the checkbox for **Require secret for web server flow**.

    - Сохраните приложение.
    
      > [!div class="mx-imgBorder"]
      > ![Раздел API в экземпляре Salesforce после того, как администратор ввели все необходимые конфигурации, перечисленные выше.](media/salesforce-connector/sf1.png)

- Скопируйте ключ потребителя и секрет потребителя. Эти сведения будут использоваться в качестве ИД клиента и секрета клиента при настройке параметров подключения для соединители Graph на портале администрирования Microsoft 365.

  > [!div class="mx-imgBorder"]
  > ![Результаты, возвращаемые разделом API в экземпляре Salesforce после того, как администратор отправил все необходимые конфигурации. Ключ потребителя находится вверху левого столбца, а секрет потребителя — вверху правого столбца.](media/salesforce-connector/clientsecret.png)
  
- Перед закрытием экземпляра Salesforce выполните следующие действия, чтобы срок действия маркеров обновления не истекал:
    - Go to Apps -> App Manager
    - Найдите созданное приложение и выберите его справа. Выберите **"Управление"**
    - Выбор **политик редактирования**
    - Для политики маркеров обновления выберите маркер **обновления действителен, пока не будет отозван**

  > [!div class="mx-imgBorder"]
  > ![Выберите политику маркеров обновления с именем "Маркер обновления действителен до отзыва"](media/salesforce-connector/oauthpolicies.png)

Теперь вы можете использовать Центр администрирования [M365](https://admin.microsoft.com/) для завершения остального процесса настройки соединители Graph.

## <a name="step-1-add-a-graph-connector-in-the-microsoft-365-admin-center"></a>Шаг 1. Добавление соединителю Graph в Центре администрирования Microsoft 365

Следуйте общим [инструкциям по настройке.](https://docs.microsoft.com/microsoftsearch/configure-connector)
<!---If the above phrase does not apply, delete it and insert specific details for your data source that are different from general setup instructions.-->

## <a name="step-2-name-the-connection"></a>Шаг 2. Имя подключения

Следуйте общим [инструкциям по настройке.](https://docs.microsoft.com/microsoftsearch/configure-connector)
<!---If the above phrase does not apply, delete it and insert specific details for your data source that are different from general setup instructions.-->

## <a name="step-3-configure-the-connection-settings"></a>Шаг 3. Настройка параметров подключения

Для URL-адреса экземпляра используйте https://[domain].my.salesforce.com, где доменом будет домен Salesforce для вашей организации.

Введите ИД клиента и секрет клиента, полученные из экземпляра Salesforce, и выберите "Вход".

При первой попытке входа с помощью этих параметров вы получите всплывающее всплывающее поле с запросом на вход в Salesforce с помощью имени пользователя и пароля администратора. На снимке экрана ниже показано всплывающее изображение. Введите свои учетные данные и выберите "Войти".

  ![Всплывающее всплывающее поле с запросом имени пользователя и пароля.](media/salesforce-connector/sf4.png)

  >[!NOTE]
  >Если всплывающее окна не появляется, оно может быть заблокировано в браузере, поэтому необходимо разрешить всплывающие окна и перенаправления.

Убедитесь, что подключение успешно с помощью поиска зеленого баннера с надписью "Подключение успешно", как покажите на снимке экрана ниже.

  > [!div class="mx-imgBorder"]
  > ![Снимок экрана: успешный вход. Зеленый баннер с надписью "Подключение успешно" находится в поле URL-адреса экземпляра Salesforce](media/salesforce-connector/sf5.png)

## <a name="step-4-manage-search-permissions"></a>Шаг 4. Управление разрешениями поиска

Вам потребуется выбрать, какие пользователи будут видеть результаты поиска из этого источника данных. Если вы разрешаете просмотр результатов поиска только определенным пользователям Azure Active Directory (Azure AD) или пользователям, не относящемся к Azure AD, убедитесь, что вы соедино удостоверения.

## <a name="step-4a-select-permissions"></a>Шаг 4а. Выбор разрешений

Вы можете выбрать доступ к спискам управления доступом (ALS) из экземпляра Salesforce или разрешить всем пользователям в организации видеть результаты поиска из этого источника данных. ALS могут включать удостоверения Azure Active Directory (AAD) (пользователей, которые являются федеративными из Azure AD в Salesforce), удостоверения, не включавшие Azure AD (у пользователей Salesforce, у которых есть соответствующие удостоверения в Azure AD) или и то, и другое.

>[!NOTE]
>Если используется сторонний поставщик удостоверений, например Ping ID или secureAuth, следует выбрать тип удостоверения "не AAD".

> [!div class="mx-imgBorder"]
> ![Выберите экран разрешений, который был завершен администратором. Администратор выбрал параметр "Только люди с доступом к этому источнику данных" и также выбрал "AAD" в выпадающего меню типов удостоверений.](media/salesforce-connector/sf6.png)

Если вы решили получить ACL из экземпляра Salesforce и выбрали "не AAD" для типа удостоверений, см. инструкции по сопоставлению удостоверений, не относяшихся к [Azure AD.](map-non-aad.md)

## <a name="step-4b-map-aad-identities"></a>Шаг 4b. Карта удостоверений AAD

Если вы решили получить ACL из экземпляра Salesforce и выбрали "AAD" для типа удостоверения, см. инструкции по сопоставлению удостоверений в сопоставлении удостоверений с использованием удостоверений [Azure AD.](map-aad.md) Чтобы узнать, как настроить службу SSO Azure AD для Salesforce, см. это [руководство.](https://docs.microsoft.com/azure/active-directory/saas-apps/salesforce-tutorial)

## <a name="step-5-assign-property-labels"></a>Шаг 5. Назначение меток свойств

Для каждой метки можно назначить свойство источника, выбрав в меню параметры. Хотя этот шаг не является обязательным, наличие некоторых меток свойств улучшит релевантность поиска и обеспечит более лучшие результаты поиска для конечных пользователей. По умолчанию некоторые метки, такие как "Title", "URL", "CreatedBy" и "LastModifiedBy", уже назначены свойства источника.

## <a name="step-6-manage-schema"></a>Шаг 6. Управление схемой

Можно выбрать, какие свойства источника должны быть проиндексироваться, чтобы они отображились в результатах поиска. Мастер подключения по умолчанию выбирает схему поиска на основе набора свойств источника. Вы можете изменить его, выбрав флажки для каждого свойства и атрибута на странице схемы поиска. К атрибутам схемы поиска относятся поиск, запрос, извлечение и уточнение.
Уточнение позволяет определить свойства, которые впоследствии можно использовать в качестве настраиваемой уточнения или фильтров в окне поиска.  

> [!div class="mx-imgBorder"]
> ![Выберите схему для каждого свойства источника. Возможные варианты: запрос, поиск, извлечение и уточнение](media/salesforce-connector/sf9.png)

## <a name="step-7-set-the-refresh-schedule"></a>Шаг 7. Настройка расписания обновления

В настоящее время соединители Salesforce поддерживают только расписания обновления для полных обходов.

>[!IMPORTANT]
>При полном обходе находятся удаленные объекты и пользователи, которые ранее синхронизировались с индексом Поиска (Майкрософт).

Рекомендуемое расписание составляет одну неделю для полного обхода контента.

## <a name="step-8-review-connection"></a>Шаг 8. Проверка подключения

Следуйте общим [инструкциям по настройке.](https://docs.microsoft.com/microsoftsearch/configure-connector)
<!---If the above phrase does not apply, delete it and insert specific details for your data source that are different from general setup instructions.-->

<!---## Troubleshooting-->
<!---Insert troubleshooting recommendations for this data source-->

## <a name="limitations"></a>Ограничения

- В настоящее время соединители Graph не поддерживают общий доступ и общий доступ на основе Apex на основе территории с помощью личных групп из Salesforce.
- В API Salesforce, который используется соединитетелем Graph, существует известная ошибка, из-за которой в настоящее время не используются значения по умолчанию для частных организаций для клиентов.  
- Если для профиля в поле установлена служба безопасности уровня поля (FLS), соединителевая служба Graph не будет вламять это поле для профилей в этой организации Salesforce. В результате пользователи не смогут искать значения для этих полей и не будут их показывать в результатах.  
- На экране "Управление схемой" эти стандартные имена свойств перечислены один раз: "Запрос", "Поиск", **"Извлечение"** и **"Уточнение"** и будут применяться к всем или нет.
    - Имя
    - Url
    - Описание
    - Fax
    - Phone
    - MobilePhone
    - Электронная почта
    - Type
    - Название
    - AccountId
    - AccountName
    - AccountUrl
    - AccountOwner
    - AccountOwnerUrl
    - Владелец
    - OwnerUrl
    - CreatedBy
    - CreatedByUrl
    - LastModifiedBy
    - LastModifiedByUrl
    - LastModifiedDate
    - ObjectName

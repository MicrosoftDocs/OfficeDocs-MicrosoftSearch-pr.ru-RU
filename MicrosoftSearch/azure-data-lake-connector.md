---
title: Соединитель Azure Data Lake для Поиска (Майкрософт)
ms.author: monaray
author: monaray97
manager: shohara
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Настройка соединители Azure Data Lake Storage Gen2 для Поиска (Майкрософт)
ms.openlocfilehash: 8891c9a1fdf5397c397a941b5131f014db9e7a54
ms.sourcegitcommit: 597c338bf9c1c425747ac74a9a1ae57c5e8957ce
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/21/2021
ms.locfileid: "49920725"
---
# <a name="azure-data-lake-storage-gen2-connector"></a><span data-ttu-id="ef281-103">Соединитель Azure Data Lake Storage Gen2</span><span class="sxs-lookup"><span data-stu-id="ef281-103">Azure Data Lake Storage Gen2 connector</span></span>

<span data-ttu-id="ef281-104">С помощью соединителя Azure Data Lake Storage Gen2 пользователи в вашей организации могут искать файлы, хранимые в учетных записях хранилища [BLOB-файлов Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) и [Azure Data Lake поколения 2.](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction)</span><span class="sxs-lookup"><span data-stu-id="ef281-104">With the Azure Data Lake Storage Gen2 connector, users in your organization can search for files stored in [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) accounts.</span></span>

<span data-ttu-id="ef281-105">Эта статья посвящена администраторам [Microsoft 365](https://www.microsoft.com/microsoft-365) или всем, кто настраивает, запускает и отслеживает соединитель Azure Data Lake Storage Gen2.</span><span class="sxs-lookup"><span data-stu-id="ef281-105">This article is for [Microsoft 365](https://www.microsoft.com/microsoft-365) administrators or anyone who configures, runs, and monitors an Azure Data Lake Storage Gen2 connector.</span></span> <span data-ttu-id="ef281-106">В ней представлен обзор конфигурации, возможностей, ограничений и методов устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="ef281-106">It gives an overview of the connector configuration, capabilities, limitations, and troubleshooting techniques.</span></span> <span data-ttu-id="ef281-107">В этой статье мы используем *хранилище Azure в* качестве универсального термина для хранилища [BLOB-хранилищ Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) и хранилища Azure Data Lake поколения [2.](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction)</span><span class="sxs-lookup"><span data-stu-id="ef281-107">In the article, we use *Azure Storage* as a generic term for [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction).</span></span>

## <a name="connect-to-a-data-source"></a><span data-ttu-id="ef281-108">Подключение к источнику данных</span><span class="sxs-lookup"><span data-stu-id="ef281-108">Connect to a data source</span></span>

### <a name="primary-storage-connection-string"></a><span data-ttu-id="ef281-109">Строка подключения к основному хранилищу</span><span class="sxs-lookup"><span data-stu-id="ef281-109">Primary storage connection string</span></span>

<span data-ttu-id="ef281-110">На экране **проверки подлинности и проверки подлинности** укажите строку подключения к основному хранилищу.</span><span class="sxs-lookup"><span data-stu-id="ef281-110">On the **Authentication and config** screen, provide the Primary Storage Connection String.</span></span> <span data-ttu-id="ef281-111">Эта строка необходима, чтобы разрешить доступ к вашей учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="ef281-111">That string is required to allow access to your storage account.</span></span> <span data-ttu-id="ef281-112">Чтобы найти строку подключения, перейдите на  портал [Azure](https://ms.portal.azure.com/#home) и перейдите в раздел "Ключи" соответствующей учетной записи хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="ef281-112">To find your connection string, go to the [Azure portal](https://ms.portal.azure.com/#home) and navigate to the **Keys** section of your relevant Azure Storage account.</span></span> <span data-ttu-id="ef281-113">Скопируйте и в paste строку подключения в соответствующее поле на экране.</span><span class="sxs-lookup"><span data-stu-id="ef281-113">Copy and paste the connection string in the appropriate field on the screen.</span></span>

<span data-ttu-id="ef281-114">Если вы не хотите предоставлять **AccountKey** (параметр в строке основного подключения к хранилищу), вам потребуется предоставить доступ к нашей службе соединителя Graph для следующих ролей.</span><span class="sxs-lookup"><span data-stu-id="ef281-114">If you do not prefer to provide the **AccountKey** (a parameter in the primary storage connection string), you will need to grant access to our Graph Connectors Service for the following roles.</span></span> <span data-ttu-id="ef281-115">(Эта функция поддерживается только для иерархического хранилища.</span><span class="sxs-lookup"><span data-stu-id="ef281-115">(This feature is only supported for hierarchical storage.</span></span> <span data-ttu-id="ef281-116">В традиционном хранилище BLOB-хранилищ необходимо предоставить accountKey.)</span><span class="sxs-lookup"><span data-stu-id="ef281-116">Traditional Blob storage will have to provide AccountKey.)</span></span>
* <span data-ttu-id="ef281-117">Storage Blob Data Reader</span><span class="sxs-lookup"><span data-stu-id="ef281-117">Storage Blob Data Reader</span></span>
* <span data-ttu-id="ef281-118">Участник данных очереди хранилища</span><span class="sxs-lookup"><span data-stu-id="ef281-118">Storage Queue Data Contributor</span></span>
* <span data-ttu-id="ef281-119">Делегатор BLOB-хранилищ</span><span class="sxs-lookup"><span data-stu-id="ef281-119">Storage Blob Delegator</span></span>

<span data-ttu-id="ef281-120">Перейдите на **вкладку "Управление** доступом" учетной записи службы хранилища Azure и следуйте инструкциям, чтобы предоставить доступ к следующему приложению:</span><span class="sxs-lookup"><span data-stu-id="ef281-120">Navigate to the **Access Control** tab of your Azure Storage account, and follow the instructions there to grant access to the following app:</span></span>

* <span data-ttu-id="ef281-121">**First Party App ID:** 56c1da01-2129-48f7-9355-af6d59d42766</span><span class="sxs-lookup"><span data-stu-id="ef281-121">**First Party App ID:** 56c1da01-2129-48f7-9355-af6d59d42766</span></span>
* <span data-ttu-id="ef281-122">**Имя приложения первой стороны:** Служба соединители Graph</span><span class="sxs-lookup"><span data-stu-id="ef281-122">**First Party App Name:** Graph Connector Service</span></span>

### <a name="storage-account-and-queue-notifications-optional"></a><span data-ttu-id="ef281-123">Учетная запись хранения и уведомления очереди (необязательно)</span><span class="sxs-lookup"><span data-stu-id="ef281-123">Storage account and queue notifications (Optional)</span></span>

<span data-ttu-id="ef281-124">Поддержка обработки изменений в режиме реального времени в службе соединители Graph может быть добавлена в будущем.</span><span class="sxs-lookup"><span data-stu-id="ef281-124">Support to process changes in real time in the Graph Connectors Service might be added in the future.</span></span> <span data-ttu-id="ef281-125">В этом случае мы будем отслеживать уведомления об изменениях хранилища Azure, хранимые в очереди.</span><span class="sxs-lookup"><span data-stu-id="ef281-125">In that case, we'll monitor Azure Storage change notifications stored in a queue.</span></span> <span data-ttu-id="ef281-126">Вам потребуется создать очередь в той же учетной записи, что и учетная запись службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="ef281-126">You'll need to create a queue in the same account as your Azure Storage account.</span></span>

<span data-ttu-id="ef281-127">После создания очереди перейдите на вкладку **"События"** на странице очереди, чтобы настроить **подписку на события.**</span><span class="sxs-lookup"><span data-stu-id="ef281-127">After you create a queue, go to the **Events** tab on the queue page to configure **Event Subscription**.</span></span> <span data-ttu-id="ef281-128">Выберите все события BLOB, которые будет получать очередь, и подключите очередь к учетной записи хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="ef281-128">Choose all the Blob events that the queue will receive, and connect the queue to the Azure Storage account.</span></span>

## <a name="manage-search-permissions"></a><span data-ttu-id="ef281-129">Управление разрешениями поиска</span><span class="sxs-lookup"><span data-stu-id="ef281-129">Manage search permissions</span></span>

### <a name="azure-data-lake-gen-2"></a><span data-ttu-id="ef281-130">Azure Data Lake Gen 2</span><span class="sxs-lookup"><span data-stu-id="ef281-130">Azure Data Lake Gen 2</span></span>

<span data-ttu-id="ef281-131">На экране **"Управление разрешениями** поиска" можно выбрать использование списков управления доступом (ALS) из учетной записи хранилища [Azure Data Lake поколения 2.](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction)</span><span class="sxs-lookup"><span data-stu-id="ef281-131">On the **Manage search permissions** screen, you can choose to ingest the Access Control Lists (ACLs) from your [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) account.</span></span> <span data-ttu-id="ef281-132">Когда эти разрешения поиска настроены, контент поиска обрезается на основе разрешений, которые назначены во время поиска пользователю [Azure Active Directory,](https://docs.microsoft.com/azure/active-directory/) выписав его.</span><span class="sxs-lookup"><span data-stu-id="ef281-132">When these search permissions are set, search content is trimmed based on the permissions assigned to the signed-in [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) user searching the content.</span></span> <span data-ttu-id="ef281-133">Кроме того, вы можете сделать все содержимое, индексироваться из учетной записи хранения, видимым всем в организации.</span><span class="sxs-lookup"><span data-stu-id="ef281-133">Alternatively, you can choose to make all the content indexed from your storage account visible to everyone in your organization.</span></span> <span data-ttu-id="ef281-134">В этом случае все в вашей организации будут иметь доступ ко всем данным в вашей учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="ef281-134">In this case, everyone in your organization will have access to all the data in your storage account.</span></span>

### <a name="azure-blob-storage"></a><span data-ttu-id="ef281-135">Хранилище BLOB-объектов Azure</span><span class="sxs-lookup"><span data-stu-id="ef281-135">Azure Blob Storage</span></span>

<span data-ttu-id="ef281-136">Для подключения к хранилищу [BLOB-данных Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction)весь контент, индексируемый из настроенного источника, виден всем в организации.</span><span class="sxs-lookup"><span data-stu-id="ef281-136">For a connection to [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction), all the content indexed from the configured source is visible to everyone in your organization.</span></span> <span data-ttu-id="ef281-137">Списки управления доступом не поддерживаются на уровне BLOB-хранилищ Azure.</span><span class="sxs-lookup"><span data-stu-id="ef281-137">Access control lists are not supported at Blob level in Azure Blob Storage.</span></span>

## <a name="search-permissions"></a><span data-ttu-id="ef281-138">Разрешения поиска</span><span class="sxs-lookup"><span data-stu-id="ef281-138">Search permissions</span></span>

<span data-ttu-id="ef281-139">Соединитель Azure Data Lake Storage Gen2 поддерживает  разрешения поиска, видимые всем или только людям с доступом **к этому источнику данных.**</span><span class="sxs-lookup"><span data-stu-id="ef281-139">The Azure Data Lake Storage Gen2 connector supports search permissions visible to **Everyone** or **Only people with access to this data source**.</span></span> <span data-ttu-id="ef281-140">Индексные данные, которые появляются в результатах поиска, могут быть видны всем пользователям в организации или только тем пользователям, у которых есть доступ к каждому элементу.</span><span class="sxs-lookup"><span data-stu-id="ef281-140">Indexed data that appears in the search results could be visible to all users in the organization or only to users who have access to each item.</span></span>

## <a name="assign-property-labels"></a><span data-ttu-id="ef281-141">Назначение меток свойств</span><span class="sxs-lookup"><span data-stu-id="ef281-141">Assign property labels</span></span>

<span data-ttu-id="ef281-142">Для каждой метки можно назначить свойство источника, выбрав в меню параметры.</span><span class="sxs-lookup"><span data-stu-id="ef281-142">You can assign a source property to each label by choosing from a menu of options.</span></span> <span data-ttu-id="ef281-143">Хотя этот шаг не является обязательным, наличие некоторых меток свойств улучшит релевантность поиска и обеспечит более точные результаты поиска для конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="ef281-143">While this step is not mandatory, having some property labels will improve the search relevance and ensure more accurate search results for end users.</span></span>

## <a name="manage-schema"></a><span data-ttu-id="ef281-144">Управление схемой</span><span class="sxs-lookup"><span data-stu-id="ef281-144">Manage schema</span></span>

<span data-ttu-id="ef281-145">На  экране "Управление схемой" можно изменить атрибуты схемы(запрашиваемые, поискуемые, искомые и уточняемые), связанные со свойствами, добавить необязательные псевдонимы и выбрать свойство **Content.**  </span><span class="sxs-lookup"><span data-stu-id="ef281-145">On the **Manage Schema** screen, you have the option to change the schema attributes (**queryable**, **searchable**, **retrievable**, and **refinable**) associated with the properties, add optional aliases, and choose the **Content** property.</span></span>

## <a name="set-the-refresh-schedule"></a><span data-ttu-id="ef281-146">Настройка расписания обновления</span><span class="sxs-lookup"><span data-stu-id="ef281-146">Set the refresh schedule</span></span>

<span data-ttu-id="ef281-147">На экране **"Параметры обновления"** можно установить интервал добавоального обхода контента и интервал полного обхода.</span><span class="sxs-lookup"><span data-stu-id="ef281-147">On the **Refresh Settings** screen, you can set the incremental crawl interval and the full crawl interval.</span></span> <span data-ttu-id="ef281-148">По умолчанию интервалы для соединителя хранилища azure Data Lake Gen2 равны 15 минутам для добавального обхода контента и одной неделе для полного обхода.</span><span class="sxs-lookup"><span data-stu-id="ef281-148">The default intervals for the Azure Data Lake Storage Gen2 connector are 15 minutes for an incremental crawl and one week for a full crawl.</span></span>

## <a name="limitations"></a><span data-ttu-id="ef281-149">Ограничения</span><span class="sxs-lookup"><span data-stu-id="ef281-149">Limitations</span></span>

<span data-ttu-id="ef281-150">Опубликованное подключение для хранилища BLOB-хранилищ Azure невозможно перенастроить для источника Хранилища данных Azure Data Lake Gen2 и наоборот.</span><span class="sxs-lookup"><span data-stu-id="ef281-150">A published connection for Azure Blob Storage cannot be reconfigured for Azure Data Lake Storage Gen2 source and vice-versa.</span></span> <span data-ttu-id="ef281-151">В таких сценариях рекомендуется настроить новое подключение.</span><span class="sxs-lookup"><span data-stu-id="ef281-151">In such scenarios, it is recommended to configure a new connection.</span></span>

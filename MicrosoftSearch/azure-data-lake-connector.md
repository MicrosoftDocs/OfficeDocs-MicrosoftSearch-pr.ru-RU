---
title: Azure Data Lake Connector для поиска Майкрософт
ms.author: monaray
author: monaray97
manager: shohara
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Настройка соединителя Gen2 для Azure Data Lake Storage для поиска Майкрософт
ms.openlocfilehash: 01fea60e91af5ba321ceb00578ea2b0745c9c394
ms.sourcegitcommit: be0c64845477127d73ee24dc727e4583ced3d0e6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/22/2020
ms.locfileid: "48206935"
---
# <a name="azure-data-lake-storage-gen2-connector"></a><span data-ttu-id="f57ff-103">Соединитель Gen2 для Azure Data Lake Storage</span><span class="sxs-lookup"><span data-stu-id="f57ff-103">Azure Data Lake Storage Gen2 connector</span></span>

<span data-ttu-id="f57ff-104">С помощью соединителя Azure Data Lake Storage Gen2 пользователи в вашей организации могут выполнять поиск файлов, хранящихся в [хранилищах больших двоичных объектов Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) и учетных записях [хранения Azure Data Lake поколения 2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) .</span><span class="sxs-lookup"><span data-stu-id="f57ff-104">With the Azure Data Lake Storage Gen2 connector, users in your organization can search for files stored in [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) accounts.</span></span>

<span data-ttu-id="f57ff-105">Эта статья предназначена для администраторов [Microsoft 365](https://www.microsoft.com/microsoft-365) или пользователей, которые настраивают, запускают и отслеживают соединитель Gen2 для Azure Data Lake Storage.</span><span class="sxs-lookup"><span data-stu-id="f57ff-105">This article is for [Microsoft 365](https://www.microsoft.com/microsoft-365) administrators or anyone who configures, runs, and monitors an Azure Data Lake Storage Gen2 connector.</span></span> <span data-ttu-id="f57ff-106">Он предоставляет обзор конфигурации соединителя, возможностей, ограничений и способов устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="f57ff-106">It gives an overview of the connector configuration, capabilities, limitations, and troubleshooting techniques.</span></span> <span data-ttu-id="f57ff-107">В этой статье мы используем *хранилище Azure* в качестве универсального термина для хранилища [больших двоичных объектов Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) и [хранилища Azure Data Lake поколения 2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction).</span><span class="sxs-lookup"><span data-stu-id="f57ff-107">In the article, we use *Azure Storage* as a generic term for [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) and [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction).</span></span>

## <a name="connect-to-a-data-source"></a><span data-ttu-id="f57ff-108">Подключение к источнику данных</span><span class="sxs-lookup"><span data-stu-id="f57ff-108">Connect to a data source</span></span>
### <a name="primary-storage-connection-string"></a><span data-ttu-id="f57ff-109">Строка подключения к основному хранилищу</span><span class="sxs-lookup"><span data-stu-id="f57ff-109">Primary storage connection string</span></span> 
<span data-ttu-id="f57ff-110">На экране **Проверка подлинности и настройка** введите строку подключения к основному хранилищу.</span><span class="sxs-lookup"><span data-stu-id="f57ff-110">On the **Authentication and config** screen, provide the Primary Storage Connection String.</span></span> <span data-ttu-id="f57ff-111">Эта строка необходима для предоставления доступа к учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="f57ff-111">That string is required to allow access to your storage account.</span></span> <span data-ttu-id="f57ff-112">Чтобы найти строку подключения, перейдите на [портал Azure](https://ms.portal.azure.com/#home) и перейдите к разделу " **ключи** " соответствующей учетной записи хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="f57ff-112">To find your connection string, go to the [Azure portal](https://ms.portal.azure.com/#home) and navigate to the **Keys** section of your relevant Azure Storage account.</span></span> <span data-ttu-id="f57ff-113">Скопируйте и вставьте строку подключения в соответствующее поле на экране.</span><span class="sxs-lookup"><span data-stu-id="f57ff-113">Copy and paste the connection string in the appropriate field on the screen.</span></span>

<span data-ttu-id="f57ff-114">Если вы не хотите предоставлять **AccountKey** (параметр в основной строке подключения хранилища), вам потребуется предоставить доступ к службе соединителей Graph для следующих ролей.</span><span class="sxs-lookup"><span data-stu-id="f57ff-114">If you do not prefer to provide the **AccountKey** (a parameter in the primary storage connection string), you will need to grant access to our Graph Connectors Service for the following roles.</span></span> 
* <span data-ttu-id="f57ff-115">Считыватель данных BLOB-объектов хранилища</span><span class="sxs-lookup"><span data-stu-id="f57ff-115">Storage Blob Data Reader</span></span>
* <span data-ttu-id="f57ff-116">Участник данных очереди хранилища</span><span class="sxs-lookup"><span data-stu-id="f57ff-116">Storage Queue Data Contributor</span></span>
* <span data-ttu-id="f57ff-117">Делегирование BLOB-объектов хранилища (только для иерархической памяти)</span><span class="sxs-lookup"><span data-stu-id="f57ff-117">Storage Blob Delegator (only for hierarchical storage)</span></span>

<span data-ttu-id="f57ff-118">Перейдите на вкладку **Управление доступом** своей учетной записи хранения Azure и следуйте инструкциям, чтобы предоставить доступ к следующему приложению:</span><span class="sxs-lookup"><span data-stu-id="f57ff-118">Navigate to the **Access Control** tab of your Azure Storage account, and follow the instructions there to grant access to the following app:</span></span>
* <span data-ttu-id="f57ff-119">**Идентификатор приложения первой стороны:** 56c1da01-2129-48f7-9355-af6d59d42766</span><span class="sxs-lookup"><span data-stu-id="f57ff-119">**First Party App ID:** 56c1da01-2129-48f7-9355-af6d59d42766</span></span>
* <span data-ttu-id="f57ff-120">**Имя приложения первой стороны:** Служба соединителя Graph</span><span class="sxs-lookup"><span data-stu-id="f57ff-120">**First Party App Name:** Graph Connector Service</span></span>

### <a name="storage-account-and-queue-notifications-optional"></a><span data-ttu-id="f57ff-121">Учетная запись хранения и уведомления об очередях (необязательно)</span><span class="sxs-lookup"><span data-stu-id="f57ff-121">Storage account and queue notifications (Optional)</span></span>
<span data-ttu-id="f57ff-122">Поддержка обработки изменений в режиме реального времени в службе соединителей Graph может быть добавлена в будущем.</span><span class="sxs-lookup"><span data-stu-id="f57ff-122">Support to process changes in real time in the Graph Connectors Service might be added in the future.</span></span> <span data-ttu-id="f57ff-123">В этом случае мы отслеживаем уведомления об изменениях в хранилище Azure, хранящиеся в очереди.</span><span class="sxs-lookup"><span data-stu-id="f57ff-123">In that case, we'll monitor Azure Storage change notifications stored in a queue.</span></span> <span data-ttu-id="f57ff-124">Вам потребуется создать очередь в той же учетной записи, что и ваша учетная запись хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="f57ff-124">You'll need to create a queue in the same account as your Azure Storage account.</span></span>

<span data-ttu-id="f57ff-125">После создания очереди перейдите на вкладку **события** на странице очередь, чтобы настроить **подписку на события**.</span><span class="sxs-lookup"><span data-stu-id="f57ff-125">After you create a queue, go to the **Events** tab on the queue page to configure **Event Subscription**.</span></span> <span data-ttu-id="f57ff-126">Выберите все события больших двоичных объектов, которые будут получены в очереди, и подключите ее к учетной записи хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="f57ff-126">Choose all the Blob events that the queue will receive, and connect the queue to the Azure Storage account.</span></span>

## <a name="manage-the-search-schema"></a><span data-ttu-id="f57ff-127">Управление схемой поиска</span><span class="sxs-lookup"><span data-stu-id="f57ff-127">Manage the search schema</span></span>
<span data-ttu-id="f57ff-128">На экране **Управление схемой** можно изменить атрибуты схемы (возможность**запроса**, **Поиск**и возможность **извлечения**), связанные с управляемыми свойствами.</span><span class="sxs-lookup"><span data-stu-id="f57ff-128">On the **Manage Schema** screen, you have the option to change the schema attributes (**queryable**, **searchable**, and **retrievable**) associated with the managed properties.</span></span> <span data-ttu-id="f57ff-129">Эти атрибуты управляемых свойств индексируются из учетной записи хранения данных Azure.</span><span class="sxs-lookup"><span data-stu-id="f57ff-129">These managed property attributes are data indexed from your Azure Data Storage account.</span></span>

## <a name="manage-search-permissions"></a><span data-ttu-id="f57ff-130">Управление разрешениями поиска</span><span class="sxs-lookup"><span data-stu-id="f57ff-130">Manage search permissions</span></span>
### <a name="azure-data-lake-gen-2"></a><span data-ttu-id="f57ff-131">Azure Data Lake Gen 2</span><span class="sxs-lookup"><span data-stu-id="f57ff-131">Azure Data Lake Gen 2</span></span>
<span data-ttu-id="f57ff-132">На экране " **Управление разрешениями поиска** " можно выбрать прием списков управления доступом (ACL) из учетной записи [хранилища Azure Data Lake поколения 2](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) .</span><span class="sxs-lookup"><span data-stu-id="f57ff-132">On the **Manage search permissions** screen, you can choose to ingest the Access Control Lists (ACLs) from your [Azure Data Lake Gen 2 Storage](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) account.</span></span> <span data-ttu-id="f57ff-133">При задании этих разрешений поиска усечение контента выполняется в соответствии с разрешениями, назначенными вошедшего пользователя [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) , в котором выполняется поиск контента.</span><span class="sxs-lookup"><span data-stu-id="f57ff-133">When these search permissions are set, search content is trimmed based on the permissions assigned to the signed-in [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) user searching the content.</span></span> <span data-ttu-id="f57ff-134">Кроме того, вы можете сделать так, чтобы весь контент, индексируемый из учетной записи хранения, был виден всем пользователям в вашей организации.</span><span class="sxs-lookup"><span data-stu-id="f57ff-134">Alternatively, you can choose to make all the content indexed from your storage account visible to everyone in your organization.</span></span> <span data-ttu-id="f57ff-135">В этом случае всем пользователям в Организации будет доступен доступ ко всем данным в учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="f57ff-135">In this case, everyone in your organization will have access to all the data in your storage account.</span></span>

### <a name="azure-blob-storage"></a><span data-ttu-id="f57ff-136">Хранилище BLOB-объектов Azure</span><span class="sxs-lookup"><span data-stu-id="f57ff-136">Azure Blob Storage</span></span>
<span data-ttu-id="f57ff-137">Для подключения к [хранилищу больших двоичных объектов Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction)весь контент, индексируемый из настроенного источника, отображается для всех пользователей в Организации.</span><span class="sxs-lookup"><span data-stu-id="f57ff-137">For a connection to [Azure Blob Storage](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction), all the content indexed from the configured source is visible to everyone in your organization.</span></span> <span data-ttu-id="f57ff-138">Списки управления доступом не поддерживаются на уровне больших двоичных объектов в хранилище больших двоичных объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="f57ff-138">Access control lists are not supported at Blob level in Azure Blob Storage.</span></span>

## <a name="set-the-refresh-schedule"></a><span data-ttu-id="f57ff-139">Настройка расписания обновления</span><span class="sxs-lookup"><span data-stu-id="f57ff-139">Set the refresh schedule</span></span>
<span data-ttu-id="f57ff-140">На экране **Параметры обновления** можно задать интервал добавочного обхода контента и интервал полного обхода контента.</span><span class="sxs-lookup"><span data-stu-id="f57ff-140">On the **Refresh Settings** screen, you can set the incremental crawl interval and the full crawl interval.</span></span> <span data-ttu-id="f57ff-141">Интервалы по умолчанию для соединителя Gen2 Azure Data Lake Storage задаются 15 минут для добавочного обхода и на одну неделю для полного обхода.</span><span class="sxs-lookup"><span data-stu-id="f57ff-141">The default intervals for the Azure Data Lake Storage Gen2 connector are 15 minutes for an incremental crawl and one week for a full crawl.</span></span>

## <a name="limitations"></a><span data-ttu-id="f57ff-142">Ограничения</span><span class="sxs-lookup"><span data-stu-id="f57ff-142">Limitations</span></span>
<span data-ttu-id="f57ff-143">Опубликованное подключение к хранилищу больших двоичных объектов Azure невозможно изменить для источника Gen2 Azure Data Lake Storage и наоборот.</span><span class="sxs-lookup"><span data-stu-id="f57ff-143">A published connection for Azure Blob Storage cannot be reconfigured for Azure Data Lake Storage Gen2 source and vice-versa.</span></span> <span data-ttu-id="f57ff-144">В таких случаях рекомендуется настроить новое подключение.</span><span class="sxs-lookup"><span data-stu-id="f57ff-144">In such scenarios, it is recommended to configure a new connection.</span></span>

---
title: Соединитель Azure Data Lake для Поиска (Майкрософт)
ms.author: monaray
author: monaray97
manager: shohara
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Настройка соединители Azure Data Lake Storage Gen2 для Поиска (Майкрософт)
ms.openlocfilehash: 8891c9a1fdf5397c397a941b5131f014db9e7a54
ms.sourcegitcommit: 597c338bf9c1c425747ac74a9a1ae57c5e8957ce
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/21/2021
ms.locfileid: "49920725"
---
# <a name="azure-data-lake-storage-gen2-connector"></a>Соединитель Azure Data Lake Storage Gen2

С помощью соединителя Azure Data Lake Storage Gen2 пользователи в вашей организации могут искать файлы, хранимые в учетных записях хранилища [BLOB-файлов Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) и [Azure Data Lake поколения 2.](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction)

Эта статья посвящена администраторам [Microsoft 365](https://www.microsoft.com/microsoft-365) или всем, кто настраивает, запускает и отслеживает соединитель Azure Data Lake Storage Gen2. В ней представлен обзор конфигурации, возможностей, ограничений и методов устранения неполадок. В этой статье мы используем *хранилище Azure в* качестве универсального термина для хранилища [BLOB-хранилищ Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction) и хранилища Azure Data Lake поколения [2.](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction)

## <a name="connect-to-a-data-source"></a>Подключение к источнику данных

### <a name="primary-storage-connection-string"></a>Строка подключения к основному хранилищу

На экране **проверки подлинности и проверки подлинности** укажите строку подключения к основному хранилищу. Эта строка необходима, чтобы разрешить доступ к вашей учетной записи хранения. Чтобы найти строку подключения, перейдите на  портал [Azure](https://ms.portal.azure.com/#home) и перейдите в раздел "Ключи" соответствующей учетной записи хранилища Azure. Скопируйте и в paste строку подключения в соответствующее поле на экране.

Если вы не хотите предоставлять **AccountKey** (параметр в строке основного подключения к хранилищу), вам потребуется предоставить доступ к нашей службе соединителя Graph для следующих ролей. (Эта функция поддерживается только для иерархического хранилища. В традиционном хранилище BLOB-хранилищ необходимо предоставить accountKey.)
* Storage Blob Data Reader
* Участник данных очереди хранилища
* Делегатор BLOB-хранилищ

Перейдите на **вкладку "Управление** доступом" учетной записи службы хранилища Azure и следуйте инструкциям, чтобы предоставить доступ к следующему приложению:

* **First Party App ID:** 56c1da01-2129-48f7-9355-af6d59d42766
* **Имя приложения первой стороны:** Служба соединители Graph

### <a name="storage-account-and-queue-notifications-optional"></a>Учетная запись хранения и уведомления очереди (необязательно)

Поддержка обработки изменений в режиме реального времени в службе соединители Graph может быть добавлена в будущем. В этом случае мы будем отслеживать уведомления об изменениях хранилища Azure, хранимые в очереди. Вам потребуется создать очередь в той же учетной записи, что и учетная запись службы хранилища Azure.

После создания очереди перейдите на вкладку **"События"** на странице очереди, чтобы настроить **подписку на события.** Выберите все события BLOB, которые будет получать очередь, и подключите очередь к учетной записи хранилища Azure.

## <a name="manage-search-permissions"></a>Управление разрешениями поиска

### <a name="azure-data-lake-gen-2"></a>Azure Data Lake Gen 2

На экране **"Управление разрешениями** поиска" можно выбрать использование списков управления доступом (ALS) из учетной записи хранилища [Azure Data Lake поколения 2.](https://docs.microsoft.com/azure/storage/blobs/data-lake-storage-introduction) Когда эти разрешения поиска настроены, контент поиска обрезается на основе разрешений, которые назначены во время поиска пользователю [Azure Active Directory,](https://docs.microsoft.com/azure/active-directory/) выписав его. Кроме того, вы можете сделать все содержимое, индексироваться из учетной записи хранения, видимым всем в организации. В этом случае все в вашей организации будут иметь доступ ко всем данным в вашей учетной записи хранения.

### <a name="azure-blob-storage"></a>Хранилище BLOB-объектов Azure

Для подключения к хранилищу [BLOB-данных Azure](https://docs.microsoft.com/azure/storage/blobs/storage-blobs-introduction)весь контент, индексируемый из настроенного источника, виден всем в организации. Списки управления доступом не поддерживаются на уровне BLOB-хранилищ Azure.

## <a name="search-permissions"></a>Разрешения поиска

Соединитель Azure Data Lake Storage Gen2 поддерживает  разрешения поиска, видимые всем или только людям с доступом **к этому источнику данных.** Индексные данные, которые появляются в результатах поиска, могут быть видны всем пользователям в организации или только тем пользователям, у которых есть доступ к каждому элементу.

## <a name="assign-property-labels"></a>Назначение меток свойств

Для каждой метки можно назначить свойство источника, выбрав в меню параметры. Хотя этот шаг не является обязательным, наличие некоторых меток свойств улучшит релевантность поиска и обеспечит более точные результаты поиска для конечных пользователей.

## <a name="manage-schema"></a>Управление схемой

На  экране "Управление схемой" можно изменить атрибуты схемы(запрашиваемые, поискуемые, искомые и уточняемые), связанные со свойствами, добавить необязательные псевдонимы и выбрать свойство **Content.**  

## <a name="set-the-refresh-schedule"></a>Настройка расписания обновления

На экране **"Параметры обновления"** можно установить интервал добавоального обхода контента и интервал полного обхода. По умолчанию интервалы для соединителя хранилища azure Data Lake Gen2 равны 15 минутам для добавального обхода контента и одной неделе для полного обхода.

## <a name="limitations"></a>Ограничения

Опубликованное подключение для хранилища BLOB-хранилищ Azure невозможно перенастроить для источника Хранилища данных Azure Data Lake Gen2 и наоборот. В таких сценариях рекомендуется настроить новое подключение.
